{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\caoxue\\\\Desktop\\\\secondary\\\\src\\\\pages\\\\payment\\\\order.js\";\n\n/**\r\n * Created by Lenovo on 2019/9/22.\r\n */\n\n/**\r\n * Created by Lenovo on 2019/9/2.\r\n */\nimport React from 'react';\nimport { Title, List } from '../../share';\nimport { goNext, getData } from '../../utils';\nimport { Toast } from 'antd-mobile';\nimport Config from '../../envConfig';\nconst Item = List.Item;\nexport default class Order extends React.Component {\n  constructor(props) {\n    super(props); //获取从聊天列表页面和商品详情页传过来的参数\n\n    this.item = this.props.history.location.state || {}; //获取本地缓存的个人信息\n\n    this.user = localStorage.getItem(\"userInfo\") ? JSON.parse(localStorage.getItem(\"userInfo\")) : {};\n    this.state = {\n      addressInfo: {}\n    };\n\n    if (this.item.province) {\n      this.state.addressInfo = this.item;\n    }\n  }\n\n  componentDidMount() {\n    this.getAddressList();\n  }\n\n  getAddressList() {\n    if (!this.state.addressInfo.province) {\n      getData({\n        method: 'post',\n        url: 'getAddressList',\n        data: {\n          pageNum: 1,\n          pageSize: 100\n        },\n        successCB: res => {\n          console.log(res);\n          var data = res.result.list;\n          var obj = {};\n          var isDefaultAddress = false;\n\n          if (data.length > 0) {\n            data.map(item => {\n              if (item.isDefaultAddress == 1) {\n                isDefaultAddress = true;\n                obj = item;\n              }\n            });\n\n            if (!isDefaultAddress) {\n              obj = data[0];\n            }\n\n            this.setState({\n              addressInfo: obj\n            });\n          }\n        }\n      });\n    }\n  }\n\n  order() {\n    if (this.state.addressInfo.id) {\n      window.location.href = Config.serverUrl + \"alipay?orderId=\" + this.item.orderId + \"&token=\" + this.user.token + \"&addressId=\" + this.state.addressInfo.id;\n    } else {\n      Toast.info(\"请添加地址\", 1);\n    }\n  }\n\n  render() {\n    var productImgs = this.item.productImgs && this.item.productImgs.split(\",\");\n    var obj = this.state.addressInfo;\n    return React.createElement(\"div\", {\n      className: \"cm-bc-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Title, {\n      title: \"\\u8D2D\\u4E70\\u5546\\u54C1\",\n      that: this,\n      style: {\n        background: \"#fff\"\n      },\n      onLeftClick: () => goNext(this, \"orderDetail\", this.item),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"cm-flex cm-jc-sb cm-p-02\",\n      onClick: () => goNext(this, \"productDetail\", this.item),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, productImgs && productImgs[0] ? React.createElement(\"img\", {\n      src: productImgs[0],\n      alt: \"\",\n      className: \"cm-img-12 cm-mr-02\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      className: \"cm-img-10 cm-mr-02 cm-c-999 cm-fs-026 cm-border-ddd cm-flex cm-ai-c cm-tx-c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"\\u8BE5\\u5546\\u54C1\\u5DF2\\u4E0B\\u67B6\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-c-333 cm-fs-028\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, this.item.productDesc), React.createElement(\"div\", {\n      className: \"cm-c-main cm-fs-028  cm-mt-02 cm-fw-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"\\uFFE5\", this.item.productPrice)))), React.createElement(\"div\", {\n      className: \"cm-mt-02 cm-plr-02\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(List, {\n      border: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Item, {\n      leftTitle: \"\\u6536\\u8D27\\u4FE1\\u606F\",\n      rightTitle: !obj.province ? \"添加收货地址\" : React.createElement(\"div\", {\n        className: \"cm-tx-r cm-fs-024\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, obj.consigneeName), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, obj.consigneeMobile)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, obj.province + obj.city + obj.district + (obj.street ? obj.street : \"\") + obj.addressDetail)),\n      onRightClick: () => {\n        !obj.province ? goNext(this, 'addAddress', {\n          from: \"order\"\n        }) : goNext(this, 'addressManage', {\n          from: \"order\",\n          id: obj.id\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"cm-bottom-position cm-jc-sb cm-bc-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-fs-028  cm-mt-02 cm-fw-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"\\u4ED8\\u6B3E\\uFF1A\", React.createElement(\"span\", {\n      className: \"cm-c-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"\\uFFE5\", this.item.productPrice)), React.createElement(\"span\", {\n      className: \"cm-btn-main-higher cm-as-fe\",\n      onClick: () => this.order(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"\\u786E\\u5B9A\")));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\caoxue\\Desktop\\secondary\\src\\pages\\payment\\order.js"],"names":["React","Title","List","goNext","getData","Toast","Config","Item","Order","Component","constructor","props","item","history","location","state","user","localStorage","getItem","JSON","parse","addressInfo","province","componentDidMount","getAddressList","method","url","data","pageNum","pageSize","successCB","res","console","log","result","list","obj","isDefaultAddress","length","map","setState","order","id","window","href","serverUrl","orderId","token","info","render","productImgs","split","background","productDesc","productPrice","consigneeName","consigneeMobile","city","district","street","addressDetail","from"],"mappings":"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","sourcesContent":["/**\r\n * Created by Lenovo on 2019/9/22.\r\n */\r\n/**\r\n * Created by Lenovo on 2019/9/2.\r\n */\r\nimport React from 'react';\r\nimport {Title,List} from '../../share';\r\nimport {goNext,getData} from '../../utils';\r\nimport {Toast} from 'antd-mobile';\r\nimport Config from '../../envConfig';\r\nconst Item = List.Item;\r\nexport default class Order extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        //获取从聊天列表页面和商品详情页传过来的参数\r\n        this.item = this.props.history.location.state || {};\r\n        //获取本地缓存的个人信息\r\n        this.user = localStorage.getItem(\"userInfo\")?JSON.parse(localStorage.getItem(\"userInfo\")):{};\r\n        this.state = {\r\n            addressInfo:{}\r\n        };\r\n        if(this.item.province){\r\n            this.state.addressInfo = this.item;\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        this.getAddressList();\r\n    }\r\n    getAddressList(){\r\n        if(!this.state.addressInfo.province){\r\n            getData({\r\n                method: 'post',\r\n                url: 'getAddressList',\r\n                data: {\r\n                    pageNum:1,\r\n                    pageSize:100\r\n                },\r\n                successCB: (res) => {\r\n                    console.log(res);\r\n                    var data = res.result.list;\r\n                    var obj = {};\r\n                    var isDefaultAddress = false;\r\n                    if(data.length > 0){\r\n                        data.map((item)=>{\r\n                            if(item.isDefaultAddress == 1){\r\n                                isDefaultAddress = true;\r\n                                obj = item;\r\n                            }\r\n                        });\r\n                        if(!isDefaultAddress){\r\n                            obj = data[0];\r\n                        }\r\n                        this.setState({\r\n                            addressInfo:obj\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n    order(){\r\n        if(this.state.addressInfo.id){\r\n            window.location.href = Config.serverUrl+\"alipay?orderId=\"+this.item.orderId+\"&token=\"+this.user.token+\"&addressId=\"+this.state.addressInfo.id;\r\n        }else {\r\n            Toast.info(\"请添加地址\", 1);\r\n        }\r\n    }\r\n    render() {\r\n        var productImgs = this.item.productImgs && this.item.productImgs.split(\",\");\r\n        var obj = this.state.addressInfo;\r\n        return <div className=\"cm-bc-white\">\r\n            <Title title=\"购买商品\"\r\n                   that={this}\r\n                   style={{background:\"#fff\"}}\r\n                   onLeftClick={()=>goNext(this,\"orderDetail\",this.item)}\r\n            />\r\n                <div className=\"cm-flex cm-jc-sb cm-p-02\" onClick={()=>goNext(this,\"productDetail\",this.item)}>\r\n                    <div className=\"cm-flex cm-ai-c\">\r\n                        {productImgs && productImgs[0]?\r\n                            <img src={productImgs[0]} alt=\"\" className=\"cm-img-12 cm-mr-02\"/>:\r\n                            <div className=\"cm-img-10 cm-mr-02 cm-c-999 cm-fs-026 cm-border-ddd cm-flex cm-ai-c cm-tx-c\">该商品已下架</div>\r\n                        }\r\n                        <div>\r\n                            <div className=\"cm-c-333 cm-fs-028\">{this.item.productDesc}</div>\r\n                            <div className=\"cm-c-main cm-fs-028  cm-mt-02 cm-fw-bold\">￥{this.item.productPrice}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"cm-mt-02 cm-plr-02\">\r\n                <List border={false}>\r\n                    <Item\r\n                        leftTitle=\"收货信息\"\r\n                        rightTitle={\r\n                            !obj.province?\"添加收货地址\":\r\n                            <div className=\"cm-tx-r cm-fs-024\"><div><span>{obj.consigneeName}\r\n                            </span><span>{obj.consigneeMobile}</span></div>\r\n                                <div>{obj.province+obj.city+obj.district+(obj.street?obj.street:\"\")+obj.addressDetail}</div>\r\n                            </div>}\r\n                        onRightClick={()=>{!obj.province?goNext(this,'addAddress',{from:\"order\"}):goNext(this,'addressManage',{from:\"order\",id:obj.id})}}\r\n                    />\r\n                </List>\r\n                </div>\r\n                <div className=\"cm-bottom-position cm-jc-sb cm-bc-white\">\r\n                    <div className=\"cm-fs-028  cm-mt-02 cm-fw-bold\">付款：<span className=\"cm-c-main\">￥{this.item.productPrice}</span></div>\r\n                    <span className=\"cm-btn-main-higher cm-as-fe\"\r\n                          onClick={() => this.order()}>确定</span>\r\n                </div>\r\n        </div>\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}