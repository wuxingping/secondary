{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\caoxue\\\\Desktop\\\\secondary\\\\secondary\\\\src\\\\share\\\\select\\\\index.js\";\n\n/**\r\n * Created by Lenovo on 2019/8/7.\r\n */\nimport React from 'react';\nimport right from '../image/select/right.png';\nimport select from '../image/select/select.png';\nimport '../share.css';\nimport './index.css';\nimport close from '../image/select/close.png';\nexport default class Select extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isShow: false,\n      value: '',\n      id: '',\n      bottomHeight: 350\n    };\n  }\n\n  componentDidMount() {}\n\n  componentWillReceiveProps({}) {\n    this.state.value = props.options[0].name; //默认显示第一个类别\n\n    this.state.id = props.options[0].id; //默认显示第一个类别\n    // 如果numbers清空了，且内部有状态，就清空状态，触发onChange\n\n    if (numbers.length === 0 && selectedNumber != null) {\n      this.setState({\n        selectedNumber: null\n      }); // 向父组件传null值\n\n      onChange(null);\n      return;\n    } // 注：终止条件 1\n    // 如果numbers清空了，且内部无状态，则不触发onChange\n\n\n    if (numbers.length === 0) {\n      return;\n    } // 注：终止条件 2\n    // 如果selectedNumber在numbers中，就不改变它，直接返回\n\n\n    const isContainedInNumbers = numbers.some(number => number === selectedNumber);\n\n    if (isContainedInNumbers) {\n      return;\n    } // 否则，设置为选中第一项\n\n\n    const firstNumber = numbers[0];\n    this.setState({\n      selectedNumber: firstNumber\n    }); // 由于onClick会更新父组件state，导致父组件重新render，\n    // 而React在render时，不管子组件属性是否改变，都会调用componentWillReceiveProps，\n    // 因此，onClick可能会导致componentWillReceiveProps死循环\n    // 不过没关系，我们前面加上了终止条件\n\n    onChange(firstNumber);\n  }\n\n  showBox(str) {\n    this.setState({\n      isShow: !this.state.isShow\n    }, () => {\n      if (str == \"setHeight\") {\n        this.setHeight(this);\n      }\n    });\n  }\n\n  setHeight(that) {\n    var height = this.refs && this.refs.box.offsetHeight;\n\n    if (height >= this.state.bottomHeight) {\n      console.log(that.refs.box);\n      that.refs.box.style.height = this.state.bottomHeight + \"px\";\n      that.refs.box.style.overflow = \"scroll\";\n    }\n  }\n\n  closeBox() {\n    this.setState({\n      isShow: false\n    });\n  }\n\n  change(val, id) {\n    const onChange = this.props.onChange;\n    onChange(val, id);\n    this.setState({\n      value: val\n    });\n  }\n\n  render() {\n    const _this$props = this.props,\n          options = _this$props.options,\n          babel = _this$props.babel;\n    return React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c cm-jc-sb cm-width-full\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, babel), React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c\",\n      onClick: () => this.showBox(\"setHeight\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, this.state.value), React.createElement(\"img\", {\n      src: right,\n      alt: \"\",\n      className: \"publish-img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })), this.state.isShow ? React.createElement(\"div\", {\n      className: \"select-position\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"select-box\",\n      ref: \"box\",\n      onClick: () => this.showBox(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-c-main cm-ai-c cm-flex cm-jc-sb cm-mlr-10 select-top select-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-ai-c cm-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"cm-img-small-icon\",\n      src: select,\n      alt: \"\",\n      onClick: () => this.closeBox(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"cm-ml-10 cm-c-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"\\u8BF7\\u9009\\u62E9\\u5206\\u7C7B\")), React.createElement(\"img\", {\n      className: \"cm-img-small-icon\",\n      src: close,\n      alt: \"\",\n      onClick: () => this.closeBox(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"select-solid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), options.map((item, index) => {\n      console.log(item);\n      return React.createElement(\"div\", {\n        key: index,\n        className: \"select-item cm-border-top\",\n        onClick: () => this.change(item.name, item.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, item.name);\n    }))) : null);\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\caoxue\\Desktop\\secondary\\secondary\\src\\share\\select\\index.js"],"names":["React","right","select","close","Select","Component","constructor","props","state","isShow","value","id","bottomHeight","componentDidMount","componentWillReceiveProps","options","name","numbers","length","selectedNumber","setState","onChange","isContainedInNumbers","some","number","firstNumber","showBox","str","setHeight","that","height","refs","box","offsetHeight","console","log","style","overflow","closeBox","change","val","render","babel","map","item","index"],"mappings":"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","sourcesContent":["/**\r\n * Created by Lenovo on 2019/8/7.\r\n */\r\nimport React from 'react';\r\nimport right from '../image/select/right.png';\r\nimport select from '../image/select/select.png';\r\nimport '../share.css';\r\nimport './index.css';\r\nimport close from '../image/select/close.png';\r\nexport default class Select extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isShow: false,\r\n            value:'',\r\n            id:'',\r\n            bottomHeight:350,\r\n        }\r\n    }\r\n    componentDidMount(){\r\n\r\n    }\r\n    componentWillReceiveProps({}){\r\n        this.state.value = props.options[0].name;//默认显示第一个类别\r\n        this.state.id = props.options[0].id;//默认显示第一个类别\r\n        // 如果numbers清空了，且内部有状态，就清空状态，触发onChange\r\n        if (numbers.length === 0 && selectedNumber != null) {\r\n            this.setState({\r\n                selectedNumber: null,\r\n            });\r\n\r\n            // 向父组件传null值\r\n            onChange(null);\r\n            return;\r\n        }\r\n\r\n        // 注：终止条件 1\r\n        // 如果numbers清空了，且内部无状态，则不触发onChange\r\n        if (numbers.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // 注：终止条件 2\r\n        // 如果selectedNumber在numbers中，就不改变它，直接返回\r\n        const isContainedInNumbers = numbers.some(number => number === selectedNumber);\r\n        if (isContainedInNumbers) {\r\n            return;\r\n        }\r\n\r\n        // 否则，设置为选中第一项\r\n        const firstNumber = numbers[0];\r\n        this.setState({\r\n            selectedNumber: firstNumber,\r\n        });\r\n\r\n        // 由于onClick会更新父组件state，导致父组件重新render，\r\n        // 而React在render时，不管子组件属性是否改变，都会调用componentWillReceiveProps，\r\n        // 因此，onClick可能会导致componentWillReceiveProps死循环\r\n        // 不过没关系，我们前面加上了终止条件\r\n        onChange(firstNumber);\r\n    }\r\n    showBox(str) {\r\n        this.setState({\r\n            isShow: !this.state.isShow\r\n        }, ()=>{\r\n            if(str == \"setHeight\"){\r\n                this.setHeight(this)\r\n            }\r\n        })\r\n    }\r\n    setHeight(that){\r\n        var height = this.refs && this.refs.box.offsetHeight;\r\n        if(height>=this.state.bottomHeight){\r\n            console.log(that.refs.box);\r\n            that.refs.box.style.height = this.state.bottomHeight+\"px\";\r\n            that.refs.box.style.overflow = \"scroll\";\r\n        }\r\n    }\r\n    closeBox(){\r\n        this.setState({\r\n            isShow: false\r\n        })\r\n    }\r\n    change(val,id){\r\n        const {onChange}=this.props;\r\n        onChange(val,id);\r\n        this.setState({\r\n            value:val\r\n        })\r\n    }\r\n    render() {\r\n        const {options, babel} =this.props;\r\n        return (\r\n            <div className=\"cm-flex cm-ai-c cm-jc-sb cm-width-full\">\r\n                <div>{babel}</div>\r\n                <div className=\"cm-flex cm-ai-c\" onClick={() => this.showBox(\"setHeight\")}>\r\n                    <div>{this.state.value}</div>\r\n                    <img src={right} alt=\"\" className=\"publish-img\"/>\r\n                </div>\r\n                {this.state.isShow ?\r\n                    <div className=\"select-position\">\r\n                        <div className=\"select-box\" ref=\"box\" onClick={()=>this.showBox()}>\r\n                        <div className=\"cm-c-main cm-ai-c cm-flex cm-jc-sb cm-mlr-10 select-top select-item\">\r\n                            <div className=\"cm-ai-c cm-flex\">\r\n                                <img className=\"cm-img-small-icon\" src={select} alt=\"\" onClick={()=>this.closeBox()}/>\r\n                                <span className=\"cm-ml-10 cm-c-main\">请选择分类</span>\r\n                            </div>\r\n                            <img  className=\"cm-img-small-icon\" src={close} alt=\"\" onClick={()=>this.closeBox()}/></div>\r\n                            <div className=\"select-solid\"></div>\r\n                        {options.map((item,index) => {\r\n                            console.log(item);\r\n                            return <div key={index} className=\"select-item cm-border-top\" onClick={()=>this.change(item.name,item.id)}>{item.name}</div>\r\n                        })}\r\n                        </div></div> : null}\r\n            </div>\r\n        )\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}