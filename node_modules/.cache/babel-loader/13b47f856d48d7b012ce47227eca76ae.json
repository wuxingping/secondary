{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\caoxue\\\\Desktop\\\\secondary\\\\secondary\\\\src\\\\pages\\\\personal\\\\myPublish.js\";\n\n/**\r\n * Created by Lenovo on 2019/9/4.\r\n */\n\n/**\r\n * Created by Lenovo on 2019/9/2.\r\n */\nimport React from 'react';\nimport './personal.css';\nimport { Title, Card } from '../../share';\nimport publish from \"../../images/personal/publish.png\";\nimport { getData, goNext, getTimeFormat } from '../../utils';\nexport default class MyPublish extends React.Component {\n  constructor(props) {\n    super(props); //获取从个人中心传过来的参数\n\n    this.item = this.props.history.location.state || {};\n    this.state = {\n      dataList: [],\n      //初始化我发布的商品列表\n      value: null\n    };\n  }\n\n  componentDidMount() {\n    this.getMyProductList(1);\n  } //获取我发布的商品列表\n\n\n  getMyProductList(type) {\n    getData({\n      method: 'post',\n      url: 'getMyProductList',\n      data: {\n        type: type\n      },\n      successCB: res => {\n        this.setState({\n          dataList: res.result.list\n        });\n      }\n    });\n  } //编辑发布的信息，进入商品编辑页面\n\n\n  modifyPublish(e, item) {\n    e.stopPropagation();\n    goNext(this, \"modifyProduct\", item);\n  } //删除发布信息\n\n\n  delProduct(e, item) {\n    e.stopPropagation();\n    getData({\n      method: 'post',\n      url: 'delProduct',\n      data: {\n        productId: item.id\n      },\n      successCB: res => {\n        //删除之后重新调一下我发布的商品列表接口，刷新列表页\n        this.getMyProductList(1);\n      }\n    });\n  }\n\n  render() {\n    var user = JSON.parse(localStorage.getItem(\"userInfo\")) || {};\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(Title, {\n      title: \"\\u6211\\u53D1\\u5E03\\u7684\",\n      that: this,\n      style: {\n        background: \"#fff\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-ptb-018 cm-p-018 cm-bc-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: publish,\n      alt: \"\",\n      className: \"cm-img-04 cm-border-radius-half\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"cm-c-999 cm-ml-018 cm-fs-026\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"\\u6211\\u53D1\\u5E03\\u7684\\u5B9D\\u8D1D\\u5171\", React.createElement(\"span\", {\n      className: \"cm-c-main cm-fs-028\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \" \", this.state.dataList.length, \" \"), \"\\u4EF6\"))), React.createElement(\"div\", {\n      className: \"cm-plr-018\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, this.state.dataList.length > 0 ? this.state.dataList.map((item, index) => {\n      var productImgs = item.productImgs && item.productImgs.split(\",\");\n      var desc = item.productDesc && item.productDesc.slice(0, 28);\n      return React.createElement(Card, {\n        key: index,\n        onClick: () => goNext(this, \"indexDetail\", item),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cm-flex cm-jc-sb cm-ai-c cm-plr-009 cm-ptb-018\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cm-flex cm-ai-c\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: productImgs[0],\n        alt: \"\",\n        className: \"cm-img-14\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"cm-ml-018 cm-flex-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cm-c-333 cm-fs-026\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, desc), React.createElement(\"div\", {\n        className: \"cm-c-main cm-fs-030 cm-mt-018\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"\\uFFE5\", item.productPrice), React.createElement(\"div\", {\n        className: \"cm-c-999 cm-pt-018 cm-fs-022\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, getTimeFormat(item.createTime))))), React.createElement(\"div\", {\n        className: \"cm-flex cm-ai-c cm-ptb-018 cm-border-top-eee cm-jc-fe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cm-btn-border-333 cm-flex cm-ai-c cm-mr-018\",\n        onClick: e => this.modifyPublish(e, item),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"cm-fs-028\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"\\u7F16\\u8F91\")), React.createElement(\"div\", {\n        className: \"cm-btn-border-333 cm-flex cm-ai-c cm-mr-018\",\n        onClick: e => this.delProduct(e, item),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"cm-fs-028\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"\\u4E0B\\u67B6\"))));\n    }) : React.createElement(\"div\", {\n      className: \"cm-c-666 cm-tx-c cm-mt-080\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"\\u4F60\\u8FD8\\u6CA1\\u6709\\u53D1\\u5E03\\u5B9D\\u8D1D\\u54E6\\uFF01\"), React.createElement(\"div\", {\n      className: \"cm-mt-036\",\n      onClick: () => goNext(this, 'publish'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"personal-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"\\u53D1\\u5E03\\u5B9D\\u8D1D\"))))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\caoxue\\Desktop\\secondary\\secondary\\src\\pages\\personal\\myPublish.js"],"names":["React","Title","Card","publish","getData","goNext","getTimeFormat","MyPublish","Component","constructor","props","item","history","location","state","dataList","value","componentDidMount","getMyProductList","type","method","url","data","successCB","res","setState","result","list","modifyPublish","e","stopPropagation","delProduct","productId","id","render","user","JSON","parse","localStorage","getItem","background","length","map","index","productImgs","split","desc","productDesc","slice","productPrice","createTime"],"mappings":"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","sourcesContent":["/**\r\n * Created by Lenovo on 2019/9/4.\r\n */\r\n/**\r\n * Created by Lenovo on 2019/9/2.\r\n */\r\nimport React from 'react';\r\nimport './personal.css';\r\nimport {Title,Card} from '../../share';\r\nimport publish from \"../../images/personal/publish.png\";\r\nimport {getData, goNext,getTimeFormat} from '../../utils';\r\nexport default class MyPublish extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        //获取从个人中心传过来的参数\r\n        this.item = this.props.history.location.state ||{};\r\n        this.state = {\r\n            dataList:[],//初始化我发布的商品列表\r\n            value:null\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        this.getMyProductList(1);\r\n    }\r\n    //获取我发布的商品列表\r\n    getMyProductList(type){\r\n        getData({\r\n            method: 'post',\r\n            url: 'getMyProductList',\r\n            data: {\r\n                type:type\r\n            },\r\n            successCB: (res) => {\r\n                this.setState({\r\n                    dataList:res.result.list\r\n                })\r\n            }\r\n        })\r\n    }\r\n    //编辑发布的信息，进入商品编辑页面\r\n    modifyPublish(e,item){\r\n        e.stopPropagation();\r\n        goNext(this,\"modifyProduct\",item);\r\n    }\r\n    //删除发布信息\r\n    delProduct(e,item){\r\n        e.stopPropagation();\r\n        getData({\r\n            method: 'post',\r\n            url: 'delProduct',\r\n            data: {\r\n                productId:item.id\r\n            },\r\n            successCB: (res) => {\r\n                //删除之后重新调一下我发布的商品列表接口，刷新列表页\r\n                this.getMyProductList(1);\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        var user = JSON.parse(localStorage.getItem(\"userInfo\"))||{};\r\n        return <div>\r\n            <Title title=\"我发布的\" that={this} style={{background:\"#fff\"}}/>\r\n            <div>\r\n                <div className=\"cm-ptb-018 cm-p-018 cm-bc-white\">\r\n                    <div className=\"cm-flex cm-ai-c\">\r\n                        <img src={publish} alt=\"\" className=\"cm-img-04 cm-border-radius-half\"/>\r\n                        <div className=\"cm-c-999 cm-ml-018 cm-fs-026\">我发布的宝贝共<span className=\"cm-c-main cm-fs-028\"> {this.state.dataList.length} </span>件</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"cm-plr-018\">\r\n                    {this.state.dataList.length>0?this.state.dataList.map((item,index)=>{\r\n                        var productImgs = item.productImgs && item.productImgs.split(\",\");\r\n                        var desc = item.productDesc && item.productDesc.slice(0,28);\r\n                        return(\r\n                            <Card key={index} onClick={()=>goNext(this,\"indexDetail\",item)}>\r\n                                <div className=\"cm-flex cm-jc-sb cm-ai-c cm-plr-009 cm-ptb-018\">\r\n                                    <div className=\"cm-flex cm-ai-c\">\r\n                                        <img src={productImgs[0]} alt=\"\" className=\"cm-img-14\"/>\r\n                                        <div className=\"cm-ml-018 cm-flex-1\">\r\n                                            <div className=\"cm-c-333 cm-fs-026\">{desc}</div>\r\n                                            <div className=\"cm-c-main cm-fs-030 cm-mt-018\">￥{item.productPrice}</div>\r\n                                            <div className=\"cm-c-999 cm-pt-018 cm-fs-022\">{getTimeFormat(item.createTime)}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"cm-flex cm-ai-c cm-ptb-018 cm-border-top-eee cm-jc-fe\">\r\n\r\n                                    <div className=\"cm-btn-border-333 cm-flex cm-ai-c cm-mr-018\" onClick={(e)=>this.modifyPublish(e,item)}>\r\n                                        <span className=\"cm-fs-028\">编辑</span>\r\n                                    </div>\r\n                                    <div className=\"cm-btn-border-333 cm-flex cm-ai-c cm-mr-018\" onClick={(e)=>this.delProduct(e,item)}>\r\n                                        <span className=\"cm-fs-028\">下架</span>\r\n                                    </div>\r\n                                </div>\r\n                            </Card>\r\n                        )\r\n                    }):\r\n                        <div className=\"cm-c-666 cm-tx-c cm-mt-080\">\r\n                            <div>你还没有发布宝贝哦！</div>\r\n                            <div className=\"cm-mt-036\" onClick={()=>goNext(this,'publish')}>\r\n                                <span className=\"personal-btn\">发布宝贝</span>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}