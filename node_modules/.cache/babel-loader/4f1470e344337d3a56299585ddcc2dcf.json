{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\caoxue\\\\Desktop\\\\secondary\\\\secondary\\\\src\\\\pages\\\\index\\\\indexDetail.js\";\n\n/**\r\n * Created by Lenovo on 2019/8/4.\r\n */\nimport React from 'react';\nimport praise from '../../images/index/praise.png';\nimport alreadyPraise from '../../images/index/already-praise.png';\nimport praiseHeart from '../../images/index/praise-heart.png';\nimport msg from '../../images/index/msg.png';\nimport comment from '../../images/index/comment.png';\nimport avatar from '../../images/index/avatar.jpg';\nimport { Title } from '../../share';\nimport { getData } from '../../utils';\nimport { Toast } from 'antd-mobile';\nimport './index.css';\nexport default class IndexDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      praiseList: [],\n      //点赞列表\n      commentList: [],\n      //评论列表\n      isPraise: 2,\n      //是否点赞，1为是2为否，默认为2\n      isShowComment: false //是否弹出留言框\n\n    };\n    this.item = this.props.history.location.state || {};\n  }\n\n  componentDidMount() {\n    this.getPraiseList();\n    this.getCommentList();\n  }\n\n  getPraiseList() {\n    getData({\n      method: 'get',\n      url: 'getPraiseList?productId=' + this.item.id,\n      data: {\n        productId: this.item.id\n      },\n      successCB: res => {\n        this.setState({\n          praiseList: res.result\n        });\n        var user = JSON.parse(localStorage.getItem(\"userInfo\"));\n\n        for (var i = 0; i < res.result.length; i++) {\n          if (res.result[i].userName == user.userName) {\n            this.setState({\n              isPraise: 1\n            });\n            break;\n          }\n        }\n      }\n    });\n  }\n\n  getCommentList() {\n    getData({\n      method: 'get',\n      url: 'getCommentReplyList?productId=' + this.item.id,\n      data: {\n        productId: this.item.id\n      },\n      successCB: res => {\n        this.setState({\n          commentList: res.result\n        });\n      }\n    });\n  }\n\n  showBox() {\n    this.setState({\n      isShowComment: !this.state.isShowComment\n    });\n  }\n\n  comment() {\n    this.setState({\n      isShowComment: !this.state.isShowComment\n    });\n    var value = this.refs.textarea.value;\n    var user = localStorage.getItem(\"userInfo\");\n    console.log(value);\n    getData({\n      method: 'post',\n      url: 'checkLoginValid',\n      successCB: res => {\n        getData({\n          method: 'post',\n          url: 'commentOrReply',\n          data: {\n            productId: this.item.id,\n            content: value,\n            toCustomerId: user.useReducer()\n          },\n          successCB: res => {\n            this.getCommentList();\n          }\n        });\n      }\n    });\n  }\n\n  praise() {\n    var isPraise = this.state.isPraise == 2 ? 1 : 2;\n    this.setState({\n      isPraise: isPraise\n    });\n    getData({\n      method: 'post',\n      url: 'checkLoginValid',\n      successCB: res => {\n        getData({\n          method: 'post',\n          url: 'praiseOrUnPraise',\n          data: {\n            productId: this.item.id,\n            status: isPraise\n          },\n          successCB: res => {\n            this.getPraiseList();\n          }\n        });\n      }\n    });\n  }\n\n  onLeftClick() {\n    this.props.history.goBack();\n  }\n\n  render() {\n    var productImgs = this.item.productImgs.split(\",\");\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Title, {\n      title: \"\\u8BE6\\u60C5\",\n      onLeftClick: this.onLeftClick.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"cm-mlr-15\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c cm-border-bottom-gary cm-ptb-10 cm-fs-15\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.item.avatar,\n      alt: \"\",\n      className: \"cm-img-small cm-mr-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, this.item.userName)), React.createElement(\"div\", {\n      className: \"cm-ptb-10 cm-fs-15\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-c-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"\\uFFE5\", this.item.productPrice), React.createElement(\"div\", {\n      className: \"cm-c-999 cm-mtb-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, this.item.productDesc)), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, productImgs.map(img => {\n      return React.createElement(\"img\", {\n        src: img,\n        alt: \"\",\n        className: \"cm-img-banner cm-mt-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      });\n    })), React.createElement(\"div\", {\n      className: \"cm-mtb-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"cm-mr-05\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"\\u70B9\\u8D5E\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, this.state.praiseList.length)), React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c cm-mtb-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: praiseHeart,\n      alt: \"\",\n      className: \"cm-img-small-icon cm-mr-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, this.state.praiseList.length == 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"\\u6682\\u65E0\\u70B9\\u8D5E\") : this.state.praiseList.map((item, index) => {\n      return React.createElement(\"div\", {\n        className: \"cm-flex cm-ai-c\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: item.avatar,\n        className: \"cm-img-small-icon cm-border-radius\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }));\n    })))), React.createElement(\"div\", {\n      className: \"cm-mtb-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"cm-mr-05\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"\\u7559\\u8A00\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, this.state.commentList.length)), React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c cm-mtb-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: msg,\n      alt: \"\",\n      className: \"cm-img-small-icon cm-mr-10 detail-start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }), this.state.commentList.length == 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"\\u6682\\u65E0\\u7559\\u8A00\") : this.state.commentList.map((item, index) => {\n      return React.createElement(\"div\", {\n        className: \"cm-width-full\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cm-flex cm-jc-sb cm-ai-c\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"cm-flex cm-ai-c\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: item.fromUserAvatar,\n        alt: \"\",\n        className: \"cm-img-small-icon cm-border-radius cm-mr-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"cm-c-333 cm-fw-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, item.fromUserName)), React.createElement(\"div\", {\n        className: \"cm-c-999\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, item.createTime)), React.createElement(\"div\", {\n        className: \"detail-comment\",\n        onClick: () => this.showBox(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, item.content));\n    }))), React.createElement(\"div\", {\n      className: \"detail-solid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    })), this.state.isShowComment ? React.createElement(\"div\", {\n      className: \"detail-position\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      ref: \"textarea\",\n      className: \"detail-textarea\",\n      name: \"\",\n      id: \"\",\n      cols: \"30\",\n      rows: \"6\",\n      placeholder: \"\\u770B\\u5BF9\\u5C31\\u7559\\u8A00\\uFF0C\\u95EE\\u95EE\\u66F4\\u591A\\u7EC6\\u8282\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"detail-send\",\n      onClick: () => this.comment(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"\\u53D1\\u9001\")) : null, React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c cm-jc-sb detail-bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c cm-jc-sb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c cm-mr-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"cm-mr-05\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"\\u70B9\\u8D5E\"), React.createElement(\"img\", {\n      src: this.state.isPraise == 1 ? alreadyPraise : praise,\n      alt: \"\",\n      className: \"cm-img-small-icon\",\n      onClick: () => this.praise(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"cm-mr-05\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"\\u7559\\u8A00\"), React.createElement(\"img\", {\n      src: comment,\n      alt: \"\",\n      className: \"cm-img-small-icon\",\n      onClick: () => this.showBox(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"detail-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"\\u804A\\u4E00\\u804A\")));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\caoxue\\Desktop\\secondary\\secondary\\src\\pages\\index\\indexDetail.js"],"names":["React","praise","alreadyPraise","praiseHeart","msg","comment","avatar","Title","getData","Toast","IndexDetail","Component","constructor","props","state","praiseList","commentList","isPraise","isShowComment","item","history","location","componentDidMount","getPraiseList","getCommentList","method","url","id","data","productId","successCB","res","setState","result","user","JSON","parse","localStorage","getItem","i","length","userName","showBox","value","refs","textarea","console","log","content","toCustomerId","useReducer","status","onLeftClick","goBack","render","productImgs","split","bind","productPrice","productDesc","map","img","index","fromUserAvatar","fromUserName","createTime"],"mappings":"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","sourcesContent":["/**\r\n * Created by Lenovo on 2019/8/4.\r\n */\r\nimport React from 'react';\r\nimport praise from '../../images/index/praise.png';\r\nimport alreadyPraise from '../../images/index/already-praise.png';\r\nimport praiseHeart from '../../images/index/praise-heart.png';\r\nimport msg from '../../images/index/msg.png';\r\nimport comment from '../../images/index/comment.png';\r\nimport avatar from '../../images/index/avatar.jpg';\r\nimport {Title} from '../../share';\r\nimport {getData} from '../../utils';\r\nimport {Toast} from 'antd-mobile';\r\nimport './index.css';\r\nexport default class IndexDetail extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            praiseList: [],//点赞列表\r\n            commentList: [],//评论列表\r\n            isPraise:2, //是否点赞，1为是2为否，默认为2\r\n            isShowComment:false//是否弹出留言框\r\n        };\r\n        this.item = this.props.history.location.state || {};\r\n    }\r\n    componentDidMount(){\r\n        this.getPraiseList();\r\n        this.getCommentList();\r\n    }\r\n    getPraiseList(){\r\n        getData({\r\n            method: 'get',\r\n            url: 'getPraiseList?productId='+this.item.id,\r\n            data: {\r\n                productId:this.item.id\r\n            },\r\n            successCB: (res) => {\r\n                this.setState({\r\n                    praiseList: res.result\r\n                })\r\n                var user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n                for(var i = 0;i<res.result.length;i++){\r\n                    if(res.result[i].userName == user.userName){\r\n                        this.setState({\r\n                            isPraise:1\r\n                        });\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n    getCommentList(){\r\n        getData({\r\n            method: 'get',\r\n            url: 'getCommentReplyList?productId='+this.item.id,\r\n            data: {\r\n                productId:this.item.id\r\n            },\r\n            successCB: (res) => {\r\n                this.setState({\r\n                    commentList: res.result\r\n                })\r\n            }\r\n        })\r\n    }\r\n    showBox(){\r\n        this.setState({\r\n            isShowComment:!this.state.isShowComment\r\n        })\r\n    }\r\n    comment(){\r\n        this.setState({\r\n            isShowComment:!this.state.isShowComment\r\n        })\r\n        var value = this.refs.textarea.value;\r\n        var user = localStorage.getItem(\"userInfo\");\r\n        console.log(value);\r\n        getData({\r\n            method: 'post',\r\n            url: 'checkLoginValid',\r\n            successCB: (res) => {\r\n                getData({\r\n                    method: 'post',\r\n                    url: 'commentOrReply',\r\n                    data: {\r\n                        productId:this.item.id,\r\n                        content:value,\r\n                        toCustomerId:user.useReducer()\r\n                    },\r\n                    successCB: (res) => {\r\n                        this.getCommentList()\r\n                    }\r\n                })\r\n            }\r\n        });\r\n    }\r\n    praise(){\r\n        var isPraise = (this.state.isPraise == 2)?1:2;\r\n        this.setState({\r\n            isPraise:isPraise\r\n        })\r\n        getData({\r\n            method: 'post',\r\n            url: 'checkLoginValid',\r\n            successCB: (res) => {\r\n                getData({\r\n                    method: 'post',\r\n                    url: 'praiseOrUnPraise',\r\n                    data: {\r\n                        productId:this.item.id,\r\n                        status:isPraise\r\n                    },\r\n                    successCB: (res) => {\r\n                        this.getPraiseList();\r\n                    }\r\n                })\r\n            }\r\n        });\r\n    }\r\n    onLeftClick(){\r\n        this.props.history.goBack()\r\n    }\r\n    render() {\r\n        var productImgs = this.item.productImgs.split(\",\");\r\n        return (\r\n            <div>\r\n                <Title title=\"详情\" onLeftClick={this.onLeftClick.bind(this)}/>\r\n                <div className=\"cm-mlr-15\">\r\n                    <div className=\"cm-flex cm-ai-c cm-border-bottom-gary cm-ptb-10 cm-fs-15\">\r\n                        <img src={this.item.avatar} alt=\"\" className=\"cm-img-small cm-mr-10\"/>\r\n                        <div>{this.item.userName}</div>\r\n                    </div>\r\n                    <div className=\"cm-ptb-10 cm-fs-15\">\r\n                        <div className=\"cm-c-main\">￥{this.item.productPrice}</div>\r\n                        <div className=\"cm-c-999 cm-mtb-10\">{this.item.productDesc}</div>\r\n                    </div>\r\n                    <div>\r\n                        {productImgs.map((img)=>{\r\n                            return(\r\n                                <img src={img} alt=\"\" className=\"cm-img-banner cm-mt-10\"/>\r\n                                )\r\n                        })}\r\n                    </div>\r\n                    <div className=\"cm-mtb-10\">\r\n                        <div className=\"detail-line\">\r\n                            <span className=\"cm-mr-05\">点赞</span><span>{this.state.praiseList.length}</span>\r\n                        </div>\r\n                        <div className=\"cm-flex cm-ai-c cm-mtb-10\">\r\n                            <img src={praiseHeart} alt=\"\" className=\"cm-img-small-icon cm-mr-10\"/>\r\n                            <div className=\"cm-flex cm-ai-c\">\r\n                            {this.state.praiseList.length==0?\r\n                                <div>暂无点赞</div>:\r\n                                this.state.praiseList.map((item, index) => {\r\n                                return (\r\n                                    <div className=\"cm-flex cm-ai-c\">\r\n                                        <img src={item.avatar} className=\"cm-img-small-icon cm-border-radius\"/>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    </div>\r\n                    <div className=\"cm-mtb-10\">\r\n                        <div className=\"detail-line\"><span\r\n                            className=\"cm-mr-05\">留言</span><span>{this.state.commentList.length}</span></div>\r\n                        <div className=\"cm-flex cm-ai-c cm-mtb-10\">\r\n                            <img src={msg} alt=\"\" className=\"cm-img-small-icon cm-mr-10 detail-start\"/>\r\n                            {this.state.commentList.length==0?<div>暂无留言</div>:\r\n                                this.state.commentList.map((item, index) => {\r\n                                    return (\r\n                                        <div className=\"cm-width-full\">\r\n                                        <div className=\"cm-flex cm-jc-sb cm-ai-c\">\r\n                                            <div className=\"cm-flex cm-ai-c\">\r\n                                                <img src={item.fromUserAvatar} alt=\"\" className=\"cm-img-small-icon cm-border-radius cm-mr-10\"/>\r\n                                                <div className=\"cm-c-333 cm-fw-bold\">{item.fromUserName}</div>\r\n                                            </div>\r\n                                            <div className=\"cm-c-999\">{item.createTime}</div>\r\n                                        </div>\r\n                                        <div className=\"detail-comment\" onClick={()=>this.showBox()}>{item.content}</div>\r\n                                        </div>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"detail-solid\"></div>\r\n                </div>\r\n                    {this.state.isShowComment?<div className=\"detail-position\">\r\n                            <textarea ref=\"textarea\" className=\"detail-textarea\" name=\"\" id=\"\" cols=\"30\" rows=\"6\" placeholder=\"看对就留言，问问更多细节\"></textarea>\r\n                            <div className=\"detail-send\" onClick={()=>this.comment()}>发送</div>\r\n                        </div>:null}\r\n\r\n                    <div className=\"cm-flex cm-ai-c cm-jc-sb detail-bottom\">\r\n                        <div className=\"cm-flex cm-ai-c cm-jc-sb\">\r\n                            <div className=\"cm-flex cm-ai-c cm-mr-10\"><span className=\"cm-mr-05\">点赞</span><img\r\n                                src={this.state.isPraise == 1?alreadyPraise:praise} alt=\"\" className=\"cm-img-small-icon\" onClick={()=>this.praise()}/></div>\r\n                            <div className=\"cm-flex cm-ai-c\"><span className=\"cm-mr-05\">留言</span>\r\n                                <img src={comment} alt=\"\" className=\"cm-img-small-icon\" onClick={()=>this.showBox()}/>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"detail-btn\">聊一聊</div>\r\n                    </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}