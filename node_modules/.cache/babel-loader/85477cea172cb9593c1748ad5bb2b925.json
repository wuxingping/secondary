{"ast":null,"code":"module.exports = function () {\n  !function (a, b) {\n    \"function\" == typeof define && (define.amd || define.cmd) ? define(function () {\n      return b(a);\n    }) : b(a, !0);\n  }(this, function (a, b) {\n    function c(b, c, d) {\n      a.WeixinJSBridge ? WeixinJSBridge.invoke(b, e(c), function (a) {\n        h(b, a, d);\n      }) : k(b, d);\n    }\n\n    function d(b, c, d) {\n      a.WeixinJSBridge ? WeixinJSBridge.on(b, function (a) {\n        d && d.trigger && d.trigger(a), h(b, a, c);\n      }) : d ? k(b, d) : k(b, c);\n    }\n\n    function e(a) {\n      return a = a || {}, a.appId = D.appId, a.verifyAppId = D.appId, a.verifySignType = \"sha1\", a.verifyTimestamp = D.timestamp + \"\", a.verifyNonceStr = D.nonceStr, a.verifySignature = D.signature, a;\n    }\n\n    function f(a) {\n      return {\n        timeStamp: a.timestamp + \"\",\n        nonceStr: a.nonceStr,\n        \"package\": a[\"package\"],\n        paySign: a.paySign,\n        signType: a.signType || \"SHA1\"\n      };\n    }\n\n    function g(a) {\n      return a.postalCode = a.addressPostalCode, delete a.addressPostalCode, a.provinceName = a.proviceFirstStageName, delete a.proviceFirstStageName, a.cityName = a.addressCitySecondStageName, delete a.addressCitySecondStageName, a.countryName = a.addressCountiesThirdStageName, delete a.addressCountiesThirdStageName, a.detailInfo = a.addressDetailInfo, delete a.addressDetailInfo, a;\n    }\n\n    function h(a, b, c) {\n      \"openEnterpriseChat\" == a && (b.errCode = b.err_code), delete b.err_code, delete b.err_desc, delete b.err_detail;\n      var d = b.errMsg;\n      d || (d = b.err_msg, delete b.err_msg, d = i(a, d), b.errMsg = d), c = c || {}, c._complete && (c._complete(b), delete c._complete), d = b.errMsg || \"\", D.debug && !c.isInnerInvoke && alert(JSON.stringify(b));\n      var e = d.indexOf(\":\"),\n          f = d.substring(e + 1);\n\n      switch (f) {\n        case \"ok\":\n          c.success && c.success(b);\n          break;\n\n        case \"cancel\":\n          c.cancel && c.cancel(b);\n          break;\n\n        default:\n          c.fail && c.fail(b);\n      }\n\n      c.complete && c.complete(b);\n    }\n\n    function i(a, b) {\n      var c = a,\n          d = q[c];\n      d && (c = d);\n      var e = \"ok\";\n\n      if (b) {\n        var f = b.indexOf(\":\");\n        e = b.substring(f + 1), \"confirm\" == e && (e = \"ok\"), \"failed\" == e && (e = \"fail\"), -1 != e.indexOf(\"failed_\") && (e = e.substring(7)), -1 != e.indexOf(\"fail_\") && (e = e.substring(5)), e = e.replace(/_/g, \" \"), e = e.toLowerCase(), (\"access denied\" == e || \"no permission to execute\" == e) && (e = \"permission denied\"), \"config\" == c && \"function not exist\" == e && (e = \"ok\"), \"\" == e && (e = \"fail\");\n      }\n\n      return b = c + \":\" + e;\n    }\n\n    function j(a) {\n      if (a) {\n        for (var b = 0, c = a.length; c > b; ++b) {\n          var d = a[b],\n              e = p[d];\n          e && (a[b] = e);\n        }\n\n        return a;\n      }\n    }\n\n    function k(a, b) {\n      if (!(!D.debug || b && b.isInnerInvoke)) {\n        var c = q[a];\n        c && (a = c), b && b._complete && delete b._complete, console.log('\"' + a + '\",', b || \"\");\n      }\n    }\n\n    function l(a) {\n      if (!(v || w || D.debug || \"6.0.2\" > A || C.systemType < 0)) {\n        var b = new Image();\n        C.appId = D.appId, C.initTime = B.initEndTime - B.initStartTime, C.preVerifyTime = B.preVerifyEndTime - B.preVerifyStartTime, I.getNetworkType({\n          isInnerInvoke: !0,\n          success: function (a) {\n            C.networkType = a.networkType;\n            var c = \"https://open.weixin.qq.com/sdk/report?v=\" + C.version + \"&o=\" + C.isPreVerifyOk + \"&s=\" + C.systemType + \"&c=\" + C.clientVersion + \"&a=\" + C.appId + \"&n=\" + C.networkType + \"&i=\" + C.initTime + \"&p=\" + C.preVerifyTime + \"&u=\" + C.url;\n            b.src = c;\n          }\n        });\n      }\n    }\n\n    function m() {\n      return new Date().getTime();\n    }\n\n    function n(b) {\n      x && (a.WeixinJSBridge ? b() : r.addEventListener && r.addEventListener(\"WeixinJSBridgeReady\", b, !1));\n    }\n\n    function o() {\n      I.invoke || (I.invoke = function (b, c, d) {\n        a.WeixinJSBridge && WeixinJSBridge.invoke(b, e(c), d);\n      }, I.on = function (b, c) {\n        a.WeixinJSBridge && WeixinJSBridge.on(b, c);\n      });\n    }\n\n    if (!a.jWeixin) {\n      var p = {\n        config: \"preVerifyJSAPI\",\n        onMenuShareTimeline: \"menu:share:timeline\",\n        onMenuShareAppMessage: \"menu:share:appmessage\",\n        onMenuShareQQ: \"menu:share:qq\",\n        onMenuShareWeibo: \"menu:share:weiboApp\",\n        onMenuShareQZone: \"menu:share:QZone\",\n        previewImage: \"imagePreview\",\n        getLocation: \"geoLocation\",\n        openProductSpecificView: \"openProductViewWithPid\",\n        addCard: \"batchAddCard\",\n        openCard: \"batchViewCard\",\n        chooseWXPay: \"getBrandWCPayRequest\",\n        openEnterpriseRedPacket: \"getRecevieBizHongBaoRequest\",\n        startSearchBeacons: \"startMonitoringBeacons\",\n        stopSearchBeacons: \"stopMonitoringBeacons\",\n        onSearchBeacons: \"onBeaconsInRange\",\n        consumeAndShareCard: \"consumedShareCard\",\n        openAddress: \"editAddress\"\n      },\n          q = function () {\n        var a = {};\n\n        for (var b in p) a[p[b]] = b;\n\n        return a;\n      }(),\n          r = a.document,\n          s = r.title,\n          t = navigator.userAgent.toLowerCase(),\n          u = navigator.platform.toLowerCase(),\n          v = !(!u.match(\"mac\") && !u.match(\"win\")),\n          w = -1 != t.indexOf(\"wxdebugger\"),\n          x = -1 != t.indexOf(\"micromessenger\"),\n          y = -1 != t.indexOf(\"android\"),\n          z = -1 != t.indexOf(\"iphone\") || -1 != t.indexOf(\"ipad\"),\n          A = function () {\n        var a = t.match(/micromessenger\\/(\\d+\\.\\d+\\.\\d+)/) || t.match(/micromessenger\\/(\\d+\\.\\d+)/);\n        return a ? a[1] : \"\";\n      }(),\n          B = {\n        initStartTime: m(),\n        initEndTime: 0,\n        preVerifyStartTime: 0,\n        preVerifyEndTime: 0\n      },\n          C = {\n        version: 1,\n        appId: \"\",\n        initTime: 0,\n        preVerifyTime: 0,\n        networkType: \"\",\n        isPreVerifyOk: 1,\n        systemType: z ? 1 : y ? 2 : -1,\n        clientVersion: A,\n        url: encodeURIComponent(location.href)\n      },\n          D = {},\n          E = {\n        _completes: []\n      },\n          F = {\n        state: 0,\n        data: {}\n      };\n\n      n(function () {\n        B.initEndTime = m();\n      });\n      var G = !1,\n          H = [],\n          I = {\n        config: function (a) {\n          D = a, k(\"config\", a);\n          var b = D.check === !1 ? !1 : !0;\n          n(function () {\n            if (b) c(p.config, {\n              verifyJsApiList: j(D.jsApiList)\n            }, function () {\n              E._complete = function (a) {\n                B.preVerifyEndTime = m(), F.state = 1, F.data = a;\n              }, E.success = function (a) {\n                C.isPreVerifyOk = 0;\n              }, E.fail = function (a) {\n                E._fail ? E._fail(a) : F.state = -1;\n              };\n              var a = E._completes;\n              return a.push(function () {\n                l();\n              }), E.complete = function (b) {\n                for (var c = 0, d = a.length; d > c; ++c) a[c]();\n\n                E._completes = [];\n              }, E;\n            }()), B.preVerifyStartTime = m();else {\n              F.state = 1;\n\n              for (var a = E._completes, d = 0, e = a.length; e > d; ++d) a[d]();\n\n              E._completes = [];\n            }\n          }), D.beta && o();\n        },\n        ready: function (a) {\n          0 != F.state ? a() : (E._completes.push(a), !x && D.debug && a());\n        },\n        error: function (a) {\n          \"6.0.2\" > A || (-1 == F.state ? a(F.data) : E._fail = a);\n        },\n        checkJsApi: function (a) {\n          var b = function (a) {\n            var b = a.checkResult;\n\n            for (var c in b) {\n              var d = q[c];\n              d && (b[d] = b[c], delete b[c]);\n            }\n\n            return a;\n          };\n\n          c(\"checkJsApi\", {\n            jsApiList: j(a.jsApiList)\n          }, function () {\n            return a._complete = function (a) {\n              if (y) {\n                var c = a.checkResult;\n                c && (a.checkResult = JSON.parse(c));\n              }\n\n              a = b(a);\n            }, a;\n          }());\n        },\n        onMenuShareTimeline: function (a) {\n          d(p.onMenuShareTimeline, {\n            complete: function () {\n              c(\"shareTimeline\", {\n                title: a.title || s,\n                desc: a.title || s,\n                img_url: a.imgUrl || \"\",\n                link: a.link || location.href,\n                type: a.type || \"link\",\n                data_url: a.dataUrl || \"\"\n              }, a);\n            }\n          }, a);\n        },\n        onMenuShareAppMessage: function (a) {\n          d(p.onMenuShareAppMessage, {\n            complete: function () {\n              c(\"sendAppMessage\", {\n                title: a.title || s,\n                desc: a.desc || \"\",\n                link: a.link || location.href,\n                img_url: a.imgUrl || \"\",\n                type: a.type || \"link\",\n                data_url: a.dataUrl || \"\"\n              }, a);\n            }\n          }, a);\n        },\n        onMenuShareQQ: function (a) {\n          d(p.onMenuShareQQ, {\n            complete: function () {\n              c(\"shareQQ\", {\n                title: a.title || s,\n                desc: a.desc || \"\",\n                img_url: a.imgUrl || \"\",\n                link: a.link || location.href\n              }, a);\n            }\n          }, a);\n        },\n        onMenuShareWeibo: function (a) {\n          d(p.onMenuShareWeibo, {\n            complete: function () {\n              c(\"shareWeiboApp\", {\n                title: a.title || s,\n                desc: a.desc || \"\",\n                img_url: a.imgUrl || \"\",\n                link: a.link || location.href\n              }, a);\n            }\n          }, a);\n        },\n        onMenuShareQZone: function (a) {\n          d(p.onMenuShareQZone, {\n            complete: function () {\n              c(\"shareQZone\", {\n                title: a.title || s,\n                desc: a.desc || \"\",\n                img_url: a.imgUrl || \"\",\n                link: a.link || location.href\n              }, a);\n            }\n          }, a);\n        },\n        startRecord: function (a) {\n          c(\"startRecord\", {}, a);\n        },\n        stopRecord: function (a) {\n          c(\"stopRecord\", {}, a);\n        },\n        onVoiceRecordEnd: function (a) {\n          d(\"onVoiceRecordEnd\", a);\n        },\n        playVoice: function (a) {\n          c(\"playVoice\", {\n            localId: a.localId\n          }, a);\n        },\n        pauseVoice: function (a) {\n          c(\"pauseVoice\", {\n            localId: a.localId\n          }, a);\n        },\n        stopVoice: function (a) {\n          c(\"stopVoice\", {\n            localId: a.localId\n          }, a);\n        },\n        onVoicePlayEnd: function (a) {\n          d(\"onVoicePlayEnd\", a);\n        },\n        uploadVoice: function (a) {\n          c(\"uploadVoice\", {\n            localId: a.localId,\n            isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1\n          }, a);\n        },\n        downloadVoice: function (a) {\n          c(\"downloadVoice\", {\n            serverId: a.serverId,\n            isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1\n          }, a);\n        },\n        translateVoice: function (a) {\n          c(\"translateVoice\", {\n            localId: a.localId,\n            isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1\n          }, a);\n        },\n        chooseImage: function (a) {\n          c(\"chooseImage\", {\n            scene: \"1|2\",\n            count: a.count || 9,\n            sizeType: a.sizeType || [\"original\", \"compressed\"],\n            sourceType: a.sourceType || [\"album\", \"camera\"]\n          }, function () {\n            return a._complete = function (a) {\n              if (y) {\n                var b = a.localIds;\n                b && (a.localIds = JSON.parse(b));\n              }\n            }, a;\n          }());\n        },\n        getLocation: function (a) {},\n        previewImage: function (a) {\n          c(p.previewImage, {\n            current: a.current,\n            urls: a.urls\n          }, a);\n        },\n        uploadImage: function (a) {\n          c(\"uploadImage\", {\n            localId: a.localId,\n            isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1\n          }, a);\n        },\n        downloadImage: function (a) {\n          c(\"downloadImage\", {\n            serverId: a.serverId,\n            isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1\n          }, a);\n        },\n        getLocalImgData: function (a) {\n          G === !1 ? (G = !0, c(\"getLocalImgData\", {\n            localId: a.localId\n          }, function () {\n            return a._complete = function (a) {\n              if (G = !1, H.length > 0) {\n                var b = H.shift();\n                wx.getLocalImgData(b);\n              }\n            }, a;\n          }())) : H.push(a);\n        },\n        getNetworkType: function (a) {\n          var b = function (a) {\n            var b = a.errMsg;\n            a.errMsg = \"getNetworkType:ok\";\n            var c = a.subtype;\n            if (delete a.subtype, c) a.networkType = c;else {\n              var d = b.indexOf(\":\"),\n                  e = b.substring(d + 1);\n\n              switch (e) {\n                case \"wifi\":\n                case \"edge\":\n                case \"wwan\":\n                  a.networkType = e;\n                  break;\n\n                default:\n                  a.errMsg = \"getNetworkType:fail\";\n              }\n            }\n            return a;\n          };\n\n          c(\"getNetworkType\", {}, function () {\n            return a._complete = function (a) {\n              a = b(a);\n            }, a;\n          }());\n        },\n        openLocation: function (a) {\n          c(\"openLocation\", {\n            latitude: a.latitude,\n            longitude: a.longitude,\n            name: a.name || \"\",\n            address: a.address || \"\",\n            scale: a.scale || 28,\n            infoUrl: a.infoUrl || \"\"\n          }, a);\n        },\n        getLocation: function (a) {\n          a = a || {}, c(p.getLocation, {\n            type: a.type || \"wgs84\"\n          }, function () {\n            return a._complete = function (a) {\n              delete a.type;\n            }, a;\n          }());\n        },\n        hideOptionMenu: function (a) {\n          c(\"hideOptionMenu\", {}, a);\n        },\n        showOptionMenu: function (a) {\n          c(\"showOptionMenu\", {}, a);\n        },\n        closeWindow: function (a) {\n          a = a || {}, c(\"closeWindow\", {}, a);\n        },\n        hideMenuItems: function (a) {\n          c(\"hideMenuItems\", {\n            menuList: a.menuList\n          }, a);\n        },\n        showMenuItems: function (a) {\n          c(\"showMenuItems\", {\n            menuList: a.menuList\n          }, a);\n        },\n        hideAllNonBaseMenuItem: function (a) {\n          c(\"hideAllNonBaseMenuItem\", {}, a);\n        },\n        showAllNonBaseMenuItem: function (a) {\n          c(\"showAllNonBaseMenuItem\", {}, a);\n        },\n        scanQRCode: function (a) {\n          a = a || {}, c(\"scanQRCode\", {\n            needResult: a.needResult || 0,\n            scanType: a.scanType || [\"qrCode\", \"barCode\"]\n          }, function () {\n            return a._complete = function (a) {\n              if (z) {\n                var b = a.resultStr;\n\n                if (b) {\n                  var c = JSON.parse(b);\n                  a.resultStr = c && c.scan_code && c.scan_code.scan_result;\n                }\n              }\n            }, a;\n          }());\n        },\n        openAddress: function (a) {\n          c(p.openAddress, {}, function () {\n            return a._complete = function (a) {\n              a = g(a);\n            }, a;\n          }());\n        },\n        openProductSpecificView: function (a) {\n          c(p.openProductSpecificView, {\n            pid: a.productId,\n            view_type: a.viewType || 0,\n            ext_info: a.extInfo\n          }, a);\n        },\n        addCard: function (a) {\n          for (var b = a.cardList, d = [], e = 0, f = b.length; f > e; ++e) {\n            var g = b[e],\n                h = {\n              card_id: g.cardId,\n              card_ext: g.cardExt\n            };\n            d.push(h);\n          }\n\n          c(p.addCard, {\n            card_list: d\n          }, function () {\n            return a._complete = function (a) {\n              var b = a.card_list;\n\n              if (b) {\n                b = JSON.parse(b);\n\n                for (var c = 0, d = b.length; d > c; ++c) {\n                  var e = b[c];\n                  e.cardId = e.card_id, e.cardExt = e.card_ext, e.isSuccess = e.is_succ ? !0 : !1, delete e.card_id, delete e.card_ext, delete e.is_succ;\n                }\n\n                a.cardList = b, delete a.card_list;\n              }\n            }, a;\n          }());\n        },\n        chooseCard: function (a) {\n          c(\"chooseCard\", {\n            app_id: D.appId,\n            location_id: a.shopId || \"\",\n            sign_type: a.signType || \"SHA1\",\n            card_id: a.cardId || \"\",\n            card_type: a.cardType || \"\",\n            card_sign: a.cardSign,\n            time_stamp: a.timestamp + \"\",\n            nonce_str: a.nonceStr\n          }, function () {\n            return a._complete = function (a) {\n              a.cardList = a.choose_card_info, delete a.choose_card_info;\n            }, a;\n          }());\n        },\n        openCard: function (a) {\n          for (var b = a.cardList, d = [], e = 0, f = b.length; f > e; ++e) {\n            var g = b[e],\n                h = {\n              card_id: g.cardId,\n              code: g.code\n            };\n            d.push(h);\n          }\n\n          c(p.openCard, {\n            card_list: d\n          }, a);\n        },\n        consumeAndShareCard: function (a) {\n          c(p.consumeAndShareCard, {\n            consumedCardId: a.cardId,\n            consumedCode: a.code\n          }, a);\n        },\n        chooseWXPay: function (a) {\n          c(p.chooseWXPay, f(a), a);\n        },\n        openEnterpriseRedPacket: function (a) {\n          c(p.openEnterpriseRedPacket, f(a), a);\n        },\n        startSearchBeacons: function (a) {\n          c(p.startSearchBeacons, {\n            ticket: a.ticket\n          }, a);\n        },\n        stopSearchBeacons: function (a) {\n          c(p.stopSearchBeacons, {}, a);\n        },\n        onSearchBeacons: function (a) {\n          d(p.onSearchBeacons, a);\n        },\n        openEnterpriseChat: function (a) {\n          c(\"openEnterpriseChat\", {\n            useridlist: a.userIds,\n            chatname: a.groupName\n          }, a);\n        }\n      },\n          J = 1,\n          K = {};\n      return r.addEventListener(\"error\", function (a) {\n        if (!y) {\n          var b = a.target,\n              c = b.tagName,\n              d = b.src;\n\n          if (\"IMG\" == c || \"VIDEO\" == c || \"AUDIO\" == c || \"SOURCE\" == c) {\n            var e = -1 != d.indexOf(\"wxlocalresource://\");\n\n            if (e) {\n              a.preventDefault(), a.stopPropagation();\n              var f = b[\"wx-id\"];\n              if (f || (f = J++, b[\"wx-id\"] = f), K[f]) return;\n              K[f] = !0, wx.ready(function () {\n                wx.getLocalImgData({\n                  localId: d,\n                  success: function (a) {\n                    b.src = a.localData;\n                  }\n                });\n              });\n            }\n          }\n        }\n      }, !0), r.addEventListener(\"load\", function (a) {\n        if (!y) {\n          var b = a.target,\n              c = b.tagName;\n          b.src;\n\n          if (\"IMG\" == c || \"VIDEO\" == c || \"AUDIO\" == c || \"SOURCE\" == c) {\n            var d = b[\"wx-id\"];\n            d && (K[d] = !1);\n          }\n        }\n      }, !0), b && (a.wx = a.jWeixin = I), I;\n    }\n  });\n}();","map":null,"metadata":{},"sourceType":"script"}