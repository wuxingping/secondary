{"ast":null,"code":"/**\r\n * Created by Lenovo on 2019/8/7.\r\n */\nimport axios from \"axios\";\nimport Config from './envConfig';\nimport { Toast } from 'antd-mobile';\nexport function getData(obj) {\n  var token = localStorage.getItem(\"token\");\n\n  if (obj.isShowLoad) {\n    Toast.loading('加载中...', 0);\n  }\n\n  var pro = axios({\n    method: obj.method,\n    url: Config.serverUrl + obj.url,\n    data: obj.data,\n    headers: obj.headers || {\n      token: token,\n      deviceId: '11',\n      requestId: \"66\",\n      clientVersion: \"66\",\n      timestamp: '66'\n    }\n  });\n\n  if (obj.method == \"get\") {\n    console.log(obj.method);\n    pro = axios.get(Config.serverUrl + obj.url + \"?pageNum=1&&pageSize=10\", {\n      params: obj.data,\n      headers: obj.headers || {\n        token: token,\n        deviceId: '11',\n        requestId: \"66\",\n        clientVersion: \"66\",\n        timestamp: '66'\n      }\n    });\n  }\n\n  pro.then(function (res) {\n    if (obj.successCB) {\n      Toast.hide();\n      console.log(res);\n      let result = res.data;\n\n      if (result.code == 999) {\n        goNext(this, \"login\");\n      }\n\n      if (result.code == 0) {\n        obj.successCB(result);\n      } else {\n        Toast.fail(result.message);\n      }\n    }\n  }).catch(function (err) {\n    if (obj.failCB) {\n      obj.failCB(err);\n    }\n  });\n}\nexport function isDefine(str) {\n  if (str == null || str == '' || str == undefined || str == NaN) {\n    return false;\n  }\n\n  ;\n  return true;\n}\nexport function goNext(that, pathname, state) {\n  console.log(that);\n\n  if (state || state == 0) {\n    that.props.history.push({\n      pathname: pathname,\n      state: state\n    });\n  } else {\n    that.props.history.push(pathname);\n  }\n}\nexport function prompt(value, msg) {\n  if (!isDefine(value)) {\n    Toast.info(msg, 1);\n    return false;\n  } else {\n    return true;\n  }\n}\nexport function* verify(arr) {\n  for (var i = 0; i < arr.length; i++) {\n    yield prompt(arr[i].value, arr[i].msg);\n  } //Generator 函数需要return之后才算真正结束\n\n\n  return;\n} //通过递归执行分段函数\n\nexport function doNext(bool, cb) {\n  //先执行第一个分段函数\n  var x = bool.next();\n\n  if (x.value) {\n    //当 value 值为 true 时（也就是非空的时候），再执行下一个分段函数\n    doNext(bool, cb);\n  } else {\n    if (x.done && cb) {\n      //分段函数执行完毕之后执行回调\n      cb();\n    }\n  }\n}\nexport function checkParam(arr, cb) {\n  //Generator 函数需要调用一次才能执行（后面通过 next 执行）。\n  var bool = verify(arr);\n  doNext(bool, cb);\n}","map":{"version":3,"sources":["C:\\Users\\caoxue\\Desktop\\secondary\\secondary\\src\\utils.js"],"names":["axios","Config","Toast","getData","obj","token","localStorage","getItem","isShowLoad","loading","pro","method","url","serverUrl","data","headers","deviceId","requestId","clientVersion","timestamp","console","log","get","params","then","res","successCB","hide","result","code","goNext","fail","message","catch","err","failCB","isDefine","str","undefined","NaN","that","pathname","state","props","history","push","prompt","value","msg","info","verify","arr","i","length","doNext","bool","cb","x","next","done","checkParam"],"mappings":"AAAA;;;AAGA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAAQC,KAAR,QAAoB,aAApB;AACA,OAAO,SAASC,OAAT,CAAiBC,GAAjB,EAAqB;AACxB,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAGH,GAAG,CAACI,UAAP,EAAkB;AACdN,IAAAA,KAAK,CAACO,OAAN,CAAc,QAAd,EAAwB,CAAxB;AACH;;AACD,MAAIC,GAAG,GAAIV,KAAK,CAAC;AACbW,IAAAA,MAAM,EAAEP,GAAG,CAACO,MADC;AAEbC,IAAAA,GAAG,EAAEX,MAAM,CAACY,SAAP,GAAiBT,GAAG,CAACQ,GAFb;AAGbE,IAAAA,IAAI,EAAEV,GAAG,CAACU,IAHG;AAIbC,IAAAA,OAAO,EAACX,GAAG,CAACW,OAAJ,IAAa;AACjBV,MAAAA,KAAK,EAACA,KADW;AAEjBW,MAAAA,QAAQ,EAAC,IAFQ;AAGjBC,MAAAA,SAAS,EAAC,IAHO;AAIjBC,MAAAA,aAAa,EAAC,IAJG;AAKjBC,MAAAA,SAAS,EAAC;AALO;AAJR,GAAD,CAAhB;;AAYA,MAAGf,GAAG,CAACO,MAAJ,IAAc,KAAjB,EAAuB;AACnBS,IAAAA,OAAO,CAACC,GAAR,CAAYjB,GAAG,CAACO,MAAhB;AACAD,IAAAA,GAAG,GAAEV,KAAK,CAACsB,GAAN,CAAUrB,MAAM,CAACY,SAAP,GAAiBT,GAAG,CAACQ,GAArB,GAAyB,yBAAnC,EAA6D;AAC9DW,MAAAA,MAAM,EAAEnB,GAAG,CAACU,IADkD;AAE9DC,MAAAA,OAAO,EAACX,GAAG,CAACW,OAAJ,IAAa;AACjBV,QAAAA,KAAK,EAACA,KADW;AAEjBW,QAAAA,QAAQ,EAAC,IAFQ;AAGjBC,QAAAA,SAAS,EAAC,IAHO;AAIjBC,QAAAA,aAAa,EAAC,IAJG;AAKjBC,QAAAA,SAAS,EAAC;AALO;AAFyC,KAA7D,CAAL;AAUH;;AACDT,EAAAA,GAAG,CAACc,IAAJ,CAAS,UAAUC,GAAV,EAAe;AACpB,QAAGrB,GAAG,CAACsB,SAAP,EAAiB;AACbxB,MAAAA,KAAK,CAACyB,IAAN;AACAP,MAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACA,UAAIG,MAAM,GAAGH,GAAG,CAACX,IAAjB;;AACA,UAAGc,MAAM,CAACC,IAAP,IAAe,GAAlB,EAAsB;AAClBC,QAAAA,MAAM,CAAC,IAAD,EAAM,OAAN,CAAN;AACH;;AACD,UAAGF,MAAM,CAACC,IAAP,IAAe,CAAlB,EAAoB;AAChBzB,QAAAA,GAAG,CAACsB,SAAJ,CAAcE,MAAd;AACH,OAFD,MAEM;AACF1B,QAAAA,KAAK,CAAC6B,IAAN,CAAWH,MAAM,CAACI,OAAlB;AACH;AACJ;AACJ,GAdD,EAcGC,KAdH,CAcS,UAAUC,GAAV,EAAe;AACpB,QAAG9B,GAAG,CAAC+B,MAAP,EAAc;AACV/B,MAAAA,GAAG,CAAC+B,MAAJ,CAAWD,GAAX;AACH;AACJ,GAlBD;AAmBH;AACD,OAAO,SAASE,QAAT,CAAkBC,GAAlB,EAAuB;AACzB,MAAGA,GAAG,IAAI,IAAP,IAAeA,GAAG,IAAI,EAAtB,IAA4BA,GAAG,IAAIC,SAAnC,IAAgDD,GAAG,IAAIE,GAA1D,EAA8D;AAC1D,WAAO,KAAP;AACH;;AAAA;AACD,SAAO,IAAP;AACJ;AAED,OAAO,SAAST,MAAT,CAAgBU,IAAhB,EAAqBC,QAArB,EAA8BC,KAA9B,EAAqC;AACxCtB,EAAAA,OAAO,CAACC,GAAR,CAAYmB,IAAZ;;AACA,MAAGE,KAAK,IAAGA,KAAK,IAAE,CAAlB,EAAoB;AAChBF,IAAAA,IAAI,CAACG,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB;AAACJ,MAAAA,QAAQ,EAACA,QAAV;AAAmBC,MAAAA,KAAK,EAACA;AAAzB,KAAxB;AACH,GAFD,MAEM;AACFF,IAAAA,IAAI,CAACG,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwBJ,QAAxB;AACH;AACJ;AACD,OAAO,SAASK,MAAT,CAAgBC,KAAhB,EAAsBC,GAAtB,EAA2B;AAC9B,MAAG,CAACZ,QAAQ,CAACW,KAAD,CAAZ,EAAoB;AAChB7C,IAAAA,KAAK,CAAC+C,IAAN,CAAWD,GAAX,EAAgB,CAAhB;AACA,WAAO,KAAP;AACH,GAHD,MAGM;AACF,WAAO,IAAP;AACH;AACJ;AACD,OAAO,UAAWE,MAAX,CAAkBC,GAAlB,EAAsB;AACzB,OAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,GAAG,CAACE,MAAlB,EAAyBD,CAAC,EAA1B,EAA6B;AACzB,UAAMN,MAAM,CAACK,GAAG,CAACC,CAAD,CAAH,CAAOL,KAAR,EAAcI,GAAG,CAACC,CAAD,CAAH,CAAOJ,GAArB,CAAZ;AACH,GAHwB,CAIzB;;;AACA;AACH,C,CACD;;AACA,OAAO,SAASM,MAAT,CAAgBC,IAAhB,EAAqBC,EAArB,EAAwB;AAC3B;AACA,MAAIC,CAAC,GAAEF,IAAI,CAACG,IAAL,EAAP;;AACA,MAAGD,CAAC,CAACV,KAAL,EAAW;AACP;AACAO,IAAAA,MAAM,CAACC,IAAD,EAAMC,EAAN,CAAN;AACH,GAHD,MAGM;AACF,QAAGC,CAAC,CAACE,IAAF,IAAUH,EAAb,EAAgB;AACZ;AACAA,MAAAA,EAAE;AACL;AACJ;AACJ;AACD,OAAO,SAASI,UAAT,CAAoBT,GAApB,EAAwBK,EAAxB,EAA2B;AAC9B;AACA,MAAID,IAAI,GAAGL,MAAM,CAACC,GAAD,CAAjB;AACAG,EAAAA,MAAM,CAACC,IAAD,EAAMC,EAAN,CAAN;AACH","sourcesContent":["/**\r\n * Created by Lenovo on 2019/8/7.\r\n */\r\nimport axios from \"axios\";\r\nimport Config from './envConfig';\r\nimport {Toast} from 'antd-mobile';\r\nexport function getData(obj){\r\n    var token = localStorage.getItem(\"token\");\r\n    if(obj.isShowLoad){\r\n        Toast.loading('加载中...', 0);\r\n    }\r\n    var pro =  axios({\r\n        method: obj.method,\r\n        url: Config.serverUrl+obj.url,\r\n        data: obj.data,\r\n        headers:obj.headers||{\r\n            token:token,\r\n            deviceId:'11',\r\n            requestId:\"66\",\r\n            clientVersion:\"66\",\r\n            timestamp:'66',\r\n        }\r\n    });\r\n    if(obj.method == \"get\"){\r\n        console.log(obj.method);\r\n        pro =axios.get(Config.serverUrl+obj.url+\"?pageNum=1&&pageSize=10\",{\r\n            params: obj.data,\r\n            headers:obj.headers||{\r\n                token:token,\r\n                deviceId:'11',\r\n                requestId:\"66\",\r\n                clientVersion:\"66\",\r\n                timestamp:'66',\r\n            }\r\n        })\r\n    }\r\n    pro.then(function (res) {\r\n        if(obj.successCB){\r\n            Toast.hide();\r\n            console.log(res);\r\n            let result = res.data;\r\n            if(result.code == 999){\r\n                goNext(this,\"login\");\r\n            }\r\n            if(result.code == 0){\r\n                obj.successCB(result);\r\n            }else {\r\n                Toast.fail(result.message);\r\n            }\r\n        }\r\n    }).catch(function (err) {\r\n        if(obj.failCB){\r\n            obj.failCB(err);\r\n        }\r\n    });\r\n}\r\nexport function isDefine(str) {\r\n     if(str == null || str == '' || str == undefined || str == NaN){\r\n         return false\r\n     };\r\n     return true;\r\n}\r\n\r\nexport function goNext(that,pathname,state) {\r\n    console.log(that);\r\n    if(state ||state==0){\r\n        that.props.history.push({pathname:pathname,state:state});\r\n    }else {\r\n        that.props.history.push(pathname);\r\n    }\r\n}\r\nexport function prompt(value,msg) {\r\n    if(!isDefine(value)){\r\n        Toast.info(msg, 1);\r\n        return false\r\n    }else {\r\n        return true\r\n    }\r\n}\r\nexport function  *verify(arr){\r\n    for(var i=0;i<arr.length;i++){\r\n        yield prompt(arr[i].value,arr[i].msg);\r\n    }\r\n    //Generator 函数需要return之后才算真正结束\r\n    return;\r\n}\r\n//通过递归执行分段函数\r\nexport function doNext(bool,cb){\r\n    //先执行第一个分段函数\r\n    var x= bool.next();\r\n    if(x.value){\r\n        //当 value 值为 true 时（也就是非空的时候），再执行下一个分段函数\r\n        doNext(bool,cb);\r\n    }else {\r\n        if(x.done && cb){\r\n            //分段函数执行完毕之后执行回调\r\n            cb();\r\n        }\r\n    }\r\n}\r\nexport function checkParam(arr,cb){\r\n    //Generator 函数需要调用一次才能执行（后面通过 next 执行）。\r\n    var bool = verify(arr);\r\n    doNext(bool,cb);\r\n}"]},"metadata":{},"sourceType":"module"}