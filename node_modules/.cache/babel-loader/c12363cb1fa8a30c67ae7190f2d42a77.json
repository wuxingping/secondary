{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\caoxue\\\\Desktop\\\\secondary\\\\src\\\\pages\\\\payment\\\\orderDetail.js\";\n\n/**\r\n * Created by Lenovo on 2019/9/22.\r\n */\n\n/**\r\n * Created by Lenovo on 2019/9/2.\r\n */\nimport React from 'react';\nimport { Title, List } from '../../share';\nimport { goNext, getData, getTimeFormat } from '../../utils';\nimport Config from '../../envConfig';\nexport default class OrderDetail extends React.Component {\n  constructor(props) {\n    super(props); //获取从聊天列表页面和商品详情页传过来的参数\n\n    this.item = this.props.history.location.state || {};\n    console.log(this.item); //获取本地缓存的个人信息\n\n    this.user = localStorage.getItem(\"userInfo\") ? JSON.parse(localStorage.getItem(\"userInfo\")) : {};\n    this.state = {\n      orderInfo: {}\n    };\n  }\n\n  order(status) {\n    if (status == 1) {\n      window.location.href = Config.serverUrl + \"alipay?orderId=\" + this.item.orderId + \"&token=\" + this.user.token + \"&addressId=\" + this.state.orderInfo.orderId;\n    }\n  }\n\n  close() {\n    getData({\n      method: 'post',\n      url: 'cancelOrder',\n      data: {\n        orderId: this.item.orderId || 49\n      },\n      successCB: res => {\n        goNext(this, 'index');\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.getOrderDetail();\n  }\n\n  getOrderDetail() {\n    getData({\n      method: 'get',\n      url: 'getOrderDetails',\n      data: {\n        orderId: this.item.orderId || 49\n      },\n      successCB: res => {\n        this.setState({\n          orderInfo: res.result\n        });\n      }\n    });\n  }\n\n  changeBtnText(status) {\n    switch (status) {\n      case 1:\n        return \"我要付款\";\n\n      case 2:\n        return \"付款中\";\n\n      case 3:\n        return \"已付款\";\n\n      case 4:\n        return \"付款失败\";\n\n      default:\n        return \"付款异常\";\n    }\n  }\n\n  changeStatus(status) {\n    switch (status) {\n      case 1:\n        return \"待付款\";\n\n      case 2:\n        return \"付款中\";\n\n      case 3:\n        return \"已付款\";\n\n      case 4:\n        return \"付款失败\";\n\n      default:\n        return \"付款异常\";\n    }\n  }\n\n  render() {\n    var productImgs = this.item.productImgs && this.item.productImgs.split(\",\");\n\n    if (this.state.orderInfo.expiredTime > 0) {\n      var date = parseInt(this.state.orderInfo.expiredTime / 60 / 60 / 24);\n      var hour = parseInt(this.state.orderInfo.expiredTime / 60 / 60);\n      var min = this.state.orderInfo.expiredTime % 60;\n\n      if (hour < 10) {\n        hour = \"0\" + hour;\n      }\n\n      if (min < 10) {\n        min = \"0\" + min;\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: \"cm-bc-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(Title, {\n      title: \"\\u8BA2\\u5355\\u4FE1\\u606F\",\n      that: this,\n      style: {\n        background: \"#fff\"\n      },\n      onLeftClick: () => goNext(this, \"index\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"cm-c-999 cm-pt-02 cm-tx-c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"cm-fs-040 cm-fw-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.state.orderInfo.orderAmount), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"\\u5143\"), React.createElement(\"div\", {\n      className: \"cm-fs-024\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, this.changeStatus(this.state.orderInfo.payStatus))), this.state.orderInfo.expiredTime > 0 ? React.createElement(\"div\", {\n      className: \"cm-tx-c cm-mtb-04 cm-fs-024\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"cm-c-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, date), \"\\u5929\", React.createElement(\"span\", {\n      className: \"cm-c-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, hour), \"\\u65F6\", React.createElement(\"span\", {\n      className: \"cm-c-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, min), \"\\u5206\\u540E\\uFF0C\\u5982\\u679C\\u60A8\\u672A\\u4ED8\\u6B3E\\uFF0C\\u8BA2\\u5355\\u5C06\\u81EA\\u52A8\\u5173\\u95ED\") : null, React.createElement(\"div\", {\n      className: \"cm-p-02 cm-border-bottom-eee cm-border-top-eee\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-mtb-01 cm-fs-024 cm-c-666\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"cm-fs-028 cm-c-333 cm-fw-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, this.state.orderInfo.consigneeName), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, this.state.orderInfo.consigneeMobile)), React.createElement(\"div\", {\n      className: \"cm-fs-024 cm-c-666\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, this.state.orderInfo.consigneeAddress)), React.createElement(\"div\", {\n      className: \"cm-flex cm-jc-sb cm-bc-white cm-border-bottom-eee cm-p-02 cm-ai-c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-flex cm-ai-c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, productImgs && productImgs[0] ? React.createElement(\"img\", {\n      src: productImgs[0],\n      alt: \"\",\n      className: \"cm-img-06 cm-mr-02\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      className: \"cm-img-06 cm-mr-02 cm-c-999 cm-fs-026 cm-border-ddd cm-flex cm-ai-c cm-tx-c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\\u8BE5\\u5546\\u54C1\\u5DF2\\u4E0B\\u67B6\"), React.createElement(\"div\", {\n      className: \"cm-c-333 cm-fs-026 cm-fs-ellipsis\",\n      style: {\n        width: '220px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, this.state.orderInfo.productDesc || \"老家种的橙子，甘甜又可口，快来尝尝吧。\")), React.createElement(\"div\", {\n      className: \"cm-c-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"\\u8054\\u7CFB\\u5356\\u5BB6\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-mlr-02 cm-ptb-01 cm-fs-024 cm-c-999 cm-flex cm-jc-sb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"\\u4E70\\u5BB6\\u6635\\u79F0\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, this.state.orderInfo.buyerUserName)), React.createElement(\"div\", {\n      className: \"cm-mlr-02 cm-ptb-01 cm-fs-024 cm-c-999 cm-flex cm-jc-sb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"\\u8BA2\\u5355\\u7F16\\u53F7\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, this.state.orderInfo.orderId)), React.createElement(\"div\", {\n      className: \"cm-mlr-02 cm-ptb-01 cm-fs-024 cm-c-999 cm-flex cm-jc-sb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"\\u4EA4\\u6613\\u65F6\\u95F4\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, getTimeFormat(this.state.orderInfo.createTime)))), React.createElement(\"div\", {\n      className: \"cm-bottom-position cm-jc-sb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-mr-02 cm-ptb-02 cm-w-full cm-tx-c cm-bc-666 cm-c-white cm-border-radius-10\",\n      onClick: () => this.close(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"\\u5173\\u95ED\\u4EA4\\u6613\"), React.createElement(\"div\", {\n      className: (this.state.orderInfo.payStatus == 1 ? \"cm-bc-main\" : \"cm-bc-999\") + \" cm-ptb-02 cm-w-full cm-tx-c cm-c-white cm-border-radius-10\",\n      onClick: () => this.order(this.state.orderInfo.payStatus),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, this.changeBtnText(this.state.orderInfo.payStatus))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\caoxue\\Desktop\\secondary\\src\\pages\\payment\\orderDetail.js"],"names":["React","Title","List","goNext","getData","getTimeFormat","Config","OrderDetail","Component","constructor","props","item","history","location","state","console","log","user","localStorage","getItem","JSON","parse","orderInfo","order","status","window","href","serverUrl","orderId","token","close","method","url","data","successCB","res","componentDidMount","getOrderDetail","setState","result","changeBtnText","changeStatus","render","productImgs","split","expiredTime","date","parseInt","hour","min","background","orderAmount","payStatus","consigneeName","consigneeMobile","consigneeAddress","width","productDesc","buyerUserName","createTime"],"mappings":"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","sourcesContent":["/**\r\n * Created by Lenovo on 2019/9/22.\r\n */\r\n/**\r\n * Created by Lenovo on 2019/9/2.\r\n */\r\nimport React from 'react';\r\nimport {Title,List} from '../../share';\r\nimport {goNext,getData,getTimeFormat} from '../../utils';\r\nimport Config from '../../envConfig';\r\nexport default class OrderDetail extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        //获取从聊天列表页面和商品详情页传过来的参数\r\n        this.item = this.props.history.location.state || {};\r\n        console.log(this.item);\r\n        //获取本地缓存的个人信息\r\n        this.user = localStorage.getItem(\"userInfo\")?JSON.parse(localStorage.getItem(\"userInfo\")):{};\r\n        this.state = {\r\n            orderInfo:{}\r\n        }\r\n    }\r\n    order(status){\r\n        if(status == 1){\r\n            window.location.href = Config.serverUrl+\"alipay?orderId=\"+this.item.orderId+\"&token=\"+this.user.token+\"&addressId=\"+this.state.orderInfo.orderId;\r\n        }\r\n    }\r\n    close(){\r\n        getData({\r\n            method: 'post',\r\n            url: 'cancelOrder',\r\n            data:{orderId:this.item.orderId||49},\r\n            successCB: (res) => {\r\n                goNext(this,'index');\r\n            }\r\n        })\r\n    }\r\n    componentDidMount(){\r\n        this.getOrderDetail();\r\n    }\r\n    getOrderDetail(){\r\n        getData({\r\n            method: 'get',\r\n            url: 'getOrderDetails',\r\n            data:{orderId:this.item.orderId||49},\r\n            successCB: (res) => {\r\n                this.setState({\r\n                    orderInfo: res.result\r\n                })\r\n            }\r\n        })\r\n    }\r\n    changeBtnText(status){\r\n        switch (status){\r\n            case 1:\r\n                return \"我要付款\";\r\n            case 2:\r\n                return \"付款中\";\r\n            case 3:\r\n                return \"已付款\";\r\n            case 4:\r\n                return \"付款失败\";\r\n            default:\r\n                return \"付款异常\";\r\n        }\r\n    }\r\n    changeStatus(status){\r\n        switch (status){\r\n            case 1:\r\n                return \"待付款\";\r\n            case 2:\r\n                return \"付款中\";\r\n            case 3:\r\n                return \"已付款\";\r\n            case 4:\r\n                return \"付款失败\";\r\n            default:\r\n                return \"付款异常\";\r\n        }\r\n    }\r\n    render() {\r\n        var productImgs = this.item.productImgs && this.item.productImgs.split(\",\");\r\n        if(this.state.orderInfo.expiredTime>0){\r\n            var date = parseInt(this.state.orderInfo.expiredTime/60/60/24);\r\n            var hour = parseInt(this.state.orderInfo.expiredTime/60/60);\r\n            var min = this.state.orderInfo.expiredTime%60;\r\n            if(hour<10){\r\n                hour = \"0\"+hour;\r\n            }\r\n            if(min<10){\r\n                min = \"0\"+min;\r\n            }\r\n        }\r\n        return <div className=\"cm-bc-white\">\r\n            <Title title=\"订单信息\"\r\n                   that={this}\r\n                   style={{background:\"#fff\"}}\r\n                   onLeftClick={()=>goNext(this,\"index\")}\r\n            />\r\n                <div className=\"cm-c-999 cm-pt-02 cm-tx-c\">\r\n                    <span className=\"cm-fs-040 cm-fw-bold\">{this.state.orderInfo.orderAmount}</span>\r\n                <span>元</span>\r\n                    <div className=\"cm-fs-024\">{this.changeStatus(this.state.orderInfo.payStatus)}</div>\r\n                </div>\r\n            {\r\n                this.state.orderInfo.expiredTime>0? <div className=\"cm-tx-c cm-mtb-04 cm-fs-024\">\r\n                        <span className=\"cm-c-main\">{date}</span>天\r\n                        <span className=\"cm-c-main\">{hour}</span>时\r\n                        <span className=\"cm-c-main\">{min}</span>分后，如果您未付款，订单将自动关闭\r\n                    </div>:null\r\n            }\r\n                <div className=\"cm-p-02 cm-border-bottom-eee cm-border-top-eee\">\r\n                    <div className=\"cm-mtb-01 cm-fs-024 cm-c-666\"><span className=\"cm-fs-028 cm-c-333 cm-fw-bold\">{this.state.orderInfo.consigneeName}</span><span>{this.state.orderInfo.consigneeMobile}</span></div>\r\n                    <div className=\"cm-fs-024 cm-c-666\">{this.state.orderInfo.consigneeAddress}</div>\r\n                </div>\r\n                <div className=\"cm-flex cm-jc-sb cm-bc-white cm-border-bottom-eee cm-p-02 cm-ai-c\">\r\n                    <div className=\"cm-flex cm-ai-c\">\r\n                        {productImgs && productImgs[0]?\r\n                            <img src={productImgs[0]} alt=\"\" className=\"cm-img-06 cm-mr-02\"/>:\r\n                            <div className=\"cm-img-06 cm-mr-02 cm-c-999 cm-fs-026 cm-border-ddd cm-flex cm-ai-c cm-tx-c\">该商品已下架</div>\r\n                        }\r\n                        <div className=\"cm-c-333 cm-fs-026 cm-fs-ellipsis\" style={{width:'220px'}}>{this.state.orderInfo.productDesc||\"老家种的橙子，甘甜又可口，快来尝尝吧。\"}</div>\r\n                    </div>\r\n                    <div className=\"cm-c-main\">联系卖家</div>\r\n                </div>\r\n            <div>\r\n                <div className=\"cm-mlr-02 cm-ptb-01 cm-fs-024 cm-c-999 cm-flex cm-jc-sb\">\r\n                    <div>买家昵称</div>\r\n                    <div>{this.state.orderInfo.buyerUserName}</div>\r\n                </div>\r\n                <div className=\"cm-mlr-02 cm-ptb-01 cm-fs-024 cm-c-999 cm-flex cm-jc-sb\">\r\n                        <div>订单编号</div>\r\n                        <div>{this.state.orderInfo.orderId}</div>\r\n                </div>\r\n                <div className=\"cm-mlr-02 cm-ptb-01 cm-fs-024 cm-c-999 cm-flex cm-jc-sb\">\r\n                    <div>交易时间</div>\r\n                    <div>{getTimeFormat(this.state.orderInfo.createTime)}</div>\r\n                </div>\r\n            </div>\r\n            <div className=\"cm-bottom-position cm-jc-sb\">\r\n                <div className=\"cm-mr-02 cm-ptb-02 cm-w-full cm-tx-c cm-bc-666 cm-c-white cm-border-radius-10\"\r\n                      onClick={() => this.close()}>关闭交易</div>\r\n                <div className={(this.state.orderInfo.payStatus == 1?\"cm-bc-main\":\"cm-bc-999\") +\" cm-ptb-02 cm-w-full cm-tx-c cm-c-white cm-border-radius-10\"}\r\n                      onClick={() => this.order(this.state.orderInfo.payStatus)}>{this.changeBtnText(this.state.orderInfo.payStatus)}</div>\r\n            </div>\r\n        </div>\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}