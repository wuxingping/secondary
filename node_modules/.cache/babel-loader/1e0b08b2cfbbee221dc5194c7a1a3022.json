{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\caoxue\\\\Desktop\\\\secondary\\\\src\\\\share\\\\select\\\\index.js\";\n\n/**\r\n * Created by Lenovo on 2019/8/7.\r\n */\nimport React from 'react';\nimport right from '../images/select/right.png';\nimport select from '../images/select/select.png';\nimport './index.css';\nimport close from '../images/select/close.png';\nimport { defaultProps } from './defaultProps';\nexport default class Select extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isShow: false,\n      //是否显示弹出框，初始隐藏\n      active: props.activeOne && props.activeOne.type - 1 || 0,\n      //默认选中某一行\n      value: '',\n      //类别名称\n      id: '',\n      //类别id\n      bottomHeight: 250 //弹出框高度\n\n    };\n  }\n\n  componentWillReceiveProps({\n    options,\n    onChange\n  }) {\n    const isContainedInNumbers = options.some(number => number.id === this.state.id);\n\n    if (isContainedInNumbers) {\n      return;\n    }\n\n    this.state.value = this.props.activeOne && this.props.activeOne.name || options[0].name; //默认显示第一个类别\n\n    this.state.id = this.props.activeOne && this.props.activeOne.type || options[0].id; //默认显示第一个类别id\n    // 由于更新父组件state，导致父组件重新render，\n    // 而React在render时，不管子组件属性是否改变，都会调用componentWillReceiveProps，\n    // 因此会导致componentWillReceiveProps死循环\n    // 不过没关系，前面加上了终止条件\n\n    onChange(options[0]);\n  } //显示弹出框\n\n\n  showBox(str) {\n    this.setState({\n      isShow: !this.state.isShow\n    }, () => {\n      if (str === \"setHeight\") {\n        this.setHeight(this);\n      }\n    });\n  } //设置弹出框的高度\n\n\n  setHeight(that) {\n    var height = this.refs && this.refs.box.offsetHeight;\n    console.log(height);\n\n    if (height >= this.state.bottomHeight) {\n      console.log(that.refs.box);\n      that.refs.box.style.height = this.state.bottomHeight + \"px\";\n      that.refs.box.style.overflow = \"scroll\";\n    }\n  } //关闭弹出框\n\n\n  closeBox() {\n    this.setState({\n      isShow: false\n    });\n  } //选择了某一行触发的事件\n\n\n  change(item, index) {\n    const onChange = this.props.onChange;\n    onChange(item);\n    this.setState({\n      value: item.name,\n      active: index\n    });\n  }\n\n  render() {\n    const _this$props = this.props,\n          prefixCls = _this$props.prefixCls,\n          options = _this$props.options,\n          babel = _this$props.babel;\n    return React.createElement(\"div\", {\n      className: prefixCls,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, babel), React.createElement(\"div\", {\n      className: prefixCls + '-wrap',\n      onClick: () => this.showBox(\"setHeight\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, this.state.value), React.createElement(\"img\", {\n      src: right,\n      alt: \"\",\n      className: prefixCls + '-arrow',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    })), this.state.isShow ? React.createElement(\"div\", {\n      className: prefixCls + '-modal',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: prefixCls + '-content',\n      ref: \"box\",\n      onClick: () => this.showBox(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: prefixCls + '-height',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: prefixCls + '-item',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: prefixCls + '-item-left',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: prefixCls + '-item-icon',\n      src: select,\n      alt: \"\",\n      onClick: () => this.closeBox(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"cm-ml-10 cm-c-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"\\u8BF7\\u9009\\u62E9\\u5206\\u7C7B\")), React.createElement(\"img\", {\n      className: prefixCls + '-item-icon',\n      src: close,\n      alt: \"\",\n      onClick: () => this.closeBox(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }))), options.map((item, index) => {\n      return React.createElement(\"div\", {\n        key: index,\n        className: this.state.active === index ? prefixCls + '-label-active' : prefixCls + '-label',\n        onClick: () => this.change(item, index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, item.name);\n    }))) : null);\n  }\n\n}\nSelect.defaultProps = defaultProps;","map":{"version":3,"sources":["C:\\Users\\caoxue\\Desktop\\secondary\\src\\share\\select\\index.js"],"names":["React","right","select","close","defaultProps","Select","Component","constructor","props","state","isShow","active","activeOne","type","value","id","bottomHeight","componentWillReceiveProps","options","onChange","isContainedInNumbers","some","number","name","showBox","str","setState","setHeight","that","height","refs","box","offsetHeight","console","log","style","overflow","closeBox","change","item","index","render","prefixCls","babel","map"],"mappings":"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","sourcesContent":["/**\r\n * Created by Lenovo on 2019/8/7.\r\n */\r\nimport React from 'react';\r\nimport right from '../images/select/right.png';\r\nimport select from '../images/select/select.png';\r\nimport './index.css';\r\nimport close from '../images/select/close.png';\r\nimport {defaultProps} from './defaultProps';\r\nexport default class Select extends React.Component {\r\n    static defaultProps = defaultProps;\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isShow: false,//是否显示弹出框，初始隐藏\r\n            active:(props.activeOne && props.activeOne.type-1)||0,//默认选中某一行\r\n            value:'',//类别名称\r\n            id:'',//类别id\r\n            bottomHeight:250,//弹出框高度\r\n        }\r\n    }\r\n    componentWillReceiveProps({options,onChange}){\r\n        const isContainedInNumbers = options.some(number => number.id === this.state.id);\r\n        if (isContainedInNumbers) {\r\n            return;\r\n        }\r\n        this.state.value = this.props.activeOne && this.props.activeOne.name||options[0].name;//默认显示第一个类别\r\n        this.state.id = this.props.activeOne && this.props.activeOne.type||options[0].id;//默认显示第一个类别id\r\n        // 由于更新父组件state，导致父组件重新render，\r\n        // 而React在render时，不管子组件属性是否改变，都会调用componentWillReceiveProps，\r\n        // 因此会导致componentWillReceiveProps死循环\r\n        // 不过没关系，前面加上了终止条件\r\n        onChange(options[0]);\r\n    }\r\n    //显示弹出框\r\n    showBox(str) {\r\n        this.setState({\r\n            isShow: !this.state.isShow\r\n        },()=>{\r\n            if(str === \"setHeight\"){\r\n                this.setHeight(this)\r\n            }\r\n        })\r\n    }\r\n    //设置弹出框的高度\r\n    setHeight(that){\r\n        var height = this.refs && this.refs.box.offsetHeight;\r\n        console.log(height);\r\n        if(height>=this.state.bottomHeight){\r\n            console.log(that.refs.box);\r\n            that.refs.box.style.height = this.state.bottomHeight+\"px\";\r\n            that.refs.box.style.overflow = \"scroll\";\r\n        }\r\n    }\r\n    //关闭弹出框\r\n    closeBox(){\r\n        this.setState({\r\n            isShow: false\r\n        })\r\n    }\r\n    //选择了某一行触发的事件\r\n    change(item,index){\r\n        const {onChange}=this.props;\r\n        onChange(item);\r\n        this.setState({\r\n            value:item.name,\r\n            active:index\r\n        })\r\n    }\r\n    render() {\r\n        const {prefixCls,options, babel} =this.props;\r\n        return (\r\n            <div className={prefixCls}>\r\n                <div>{babel}</div>\r\n                <div className={prefixCls+'-wrap'} onClick={() => this.showBox(\"setHeight\")}>\r\n                    <div>{this.state.value}</div>\r\n                    <img src={right} alt=\"\" className={prefixCls+'-arrow'}/>\r\n                </div>\r\n                {this.state.isShow ?\r\n                    <div className={prefixCls+'-modal'}>\r\n                        <div className={prefixCls+'-content'} ref=\"box\" onClick={()=>this.showBox()}>\r\n                            <div className={prefixCls+'-height'}>\r\n                        <div className={prefixCls+'-item'}>\r\n                            <div className={prefixCls+'-item-left'}>\r\n                                <img className={prefixCls+'-item-icon'} src={select} alt=\"\" onClick={()=>this.closeBox()}/>\r\n                                <span className=\"cm-ml-10 cm-c-main\">请选择分类</span>\r\n                            </div>\r\n                            <img  className={prefixCls+'-item-icon'} src={close} alt=\"\" onClick={()=>this.closeBox()}/></div>\r\n                            </div>\r\n                        {options.map((item,index) => {\r\n                            return <div key={index} className={this.state.active === index? prefixCls+'-label-active':prefixCls+'-label'} onClick={()=>this.change(item,index)}>{item.name}</div>\r\n                        })}\r\n                        </div></div> : null}\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}