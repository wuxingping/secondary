{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\caoxue\\\\Desktop\\\\secondary\\\\src\\\\pages\\\\personal\\\\addAddress.js\";\n\n/**\r\n * Created by Lenovo on 2019/8/10.\r\n */\nimport React from 'react';\nimport { Title, List, Input, Button, Address } from '../../share';\nimport { getData, goNext, checkParam } from '../../utils';\nimport { Switch } from 'antd-mobile';\nconst Item = List.Item;\nexport default class AddAddress extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      //地址编号\n      consigneeName: '',\n      //收货人\n      consigneeMobile: '',\n      //收货人联系方式\n      province: \"\",\n      //省份\n      city: \"\",\n      //城市\n      district: \"\",\n      //区县\n      street: \"\",\n      //街道\n      addressDetail: '',\n      //详细地址\n      isDefaultAddress: false,\n      //是否为默认地址\n      isShowAddress: false //是否显示地址组件\n\n    }; //作为编辑地址时其他页面携带过来的参数信息\n\n    this.item = this.props.history.location.state || {}; //如果有参数信息携带过来，重新赋值地址信息\n\n    if (this.item.consigneeName) {\n      this.state.id = this.item.id;\n      this.state.consigneeName = this.item.consigneeName;\n      this.state.consigneeMobile = this.item.consigneeMobile;\n      this.state.province = this.item.province;\n      this.state.city = this.item.city;\n      this.state.district = this.item.district;\n      this.state.street = this.item.street;\n      this.state.addressDetail = this.item.addressDetail; //地址为1时转义为布尔值true，即默认地址；地址为2时为false。\n\n      this.state.isDefaultAddress = this.item.isDefaultAddress === 1 ? true : false;\n    }\n  } //改变value值时重置state\n\n\n  change(state) {\n    this.setState(state);\n  } //调取删除地址接口\n\n\n  delete() {\n    var arr = [{\n      value: this.state.id,\n      msg: \"没有收货地址编号\"\n    }];\n    checkParam(arr, () => {\n      getData({\n        method: 'post',\n        url: 'delAddress',\n        data: {\n          id: this.state.id\n        },\n        successCB: res => {\n          goNext(this, 'addressManage');\n        }\n      });\n    });\n  } //调取更新地址接口\n\n\n  update() {\n    var arr = [{\n      value: this.state.id,\n      msg: \"没有收货地址编号\"\n    }, {\n      value: this.state.consigneeName,\n      msg: \"请输入收货人\"\n    }, {\n      value: this.state.consigneeMobile,\n      msg: \"请输入收货人联系方式\"\n    }, {\n      value: this.state.province,\n      msg: \"请输入省份\"\n    }, {\n      value: this.state.city,\n      msg: \"请输入城市\"\n    }, {\n      value: this.state.district,\n      msg: \"请输入县区\"\n    }, {\n      value: this.state.addressDetail,\n      msg: \"请输入详细地址\"\n    }];\n    checkParam(arr, () => {\n      getData({\n        method: 'post',\n        url: 'updateAddress',\n        data: {\n          id: this.state.id,\n          consigneeName: this.state.consigneeName,\n          consigneeMobile: this.state.consigneeMobile,\n          province: this.state.province,\n          city: this.state.city,\n          district: this.state.district,\n          street: this.state.street,\n          addressDetail: this.state.addressDetail,\n          isDefaultAddress: this.state.isDefaultAddress ? 1 : 2\n        },\n        successCB: res => {\n          goNext(this, 'addressManage');\n        }\n      });\n    });\n  } //调取保存地址接口\n\n\n  save() {\n    var arr = [{\n      value: this.state.consigneeName,\n      msg: \"请输入收货人\"\n    }, {\n      value: this.state.consigneeMobile,\n      msg: \"请输入收货人联系方式\"\n    }, {\n      value: this.state.province,\n      msg: \"请输入省份\"\n    }, {\n      value: this.state.city,\n      msg: \"请输入城市\"\n    }, {\n      value: this.state.district,\n      msg: \"请输入县区\"\n    }, {\n      value: this.state.addressDetail,\n      msg: \"请输入详细地址\"\n    }];\n    checkParam(arr, () => {\n      var data = {\n        consigneeName: this.state.consigneeName,\n        consigneeMobile: this.state.consigneeMobile,\n        province: this.state.province,\n        city: this.state.city,\n        district: this.state.district,\n        street: this.state.street,\n        addressDetail: this.state.addressDetail,\n        isDefaultAddress: this.state.isDefaultAddress ? 1 : 2\n      };\n      getData({\n        method: 'post',\n        url: 'saveAddress',\n        data: data,\n        successCB: res => {\n          if (this.item.from == \"order\") {\n            goNext(this, 'order', data);\n          } else {\n            goNext(this, 'addressManage');\n          }\n        }\n      });\n    });\n  } //显示地址选择弹框\n\n\n  showAddressModel() {\n    this.setState({\n      isShowAddress: true\n    });\n  } //关闭地址选择弹框\n\n\n  closeAddressModel() {\n    this.setState({\n      isShowAddress: false\n    });\n  } //关闭地址选择弹框，获取地址信息\n\n\n  getAddress(address) {\n    this.setState({\n      isShowAddress: false,\n      province: address.province,\n      city: address.city,\n      district: address.district,\n      street: address.street\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(Title, {\n      that: this,\n      title: this.item.consigneeName ? \"编辑收货地址\" : \"添加收货地址\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"cm-mlr-02\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u6536\\u8D27\\u4EBA\",\n      defaultValue: this.state.consigneeName,\n      onChange: val => this.change({\n        consigneeName: val\n      }),\n      style: {\n        textAlign: 'left'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })), React.createElement(List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"number\",\n      maxLength: 11,\n      placeholder: \"\\u624B\\u673A\\u53F7\\u7801\",\n      defaultValue: this.state.consigneeMobile,\n      onChange: val => this.change({\n        consigneeMobile: val\n      }),\n      style: {\n        textAlign: 'left'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    })), React.createElement(List, {\n      onClick: () => this.showAddressModel(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Item, {\n      leftTitle: this.state.province ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, this.state.province), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, this.state.city), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, this.state.district), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, this.state.street)) : React.createElement(\"div\", {\n        className: \"cm-c-999\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"\\u6240\\u5728\\u5730\\u533A\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })), React.createElement(List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      placeholder: \"\\u8BE6\\u7EC6\\u5730\\u5740\\uFF1A\\u5982\\u5EFA\\u4E2D\\u8DEF88\\u53F78\\u5C42808\\u5BA4\",\n      defaultValue: this.state.addressDetail,\n      onChange: val => this.change({\n        addressDetail: val\n      }),\n      style: {\n        textAlign: 'left'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"cm-flex cm-ptb-02 cm-jc-sb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"\\u8BBE\\u4E3A\\u9ED8\\u8BA4\\u5730\\u5740\"), React.createElement(Switch, {\n      checked: this.state.isDefaultAddress,\n      onChange: val => {\n        this.setState({\n          isDefaultAddress: val\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    })), this.item.consigneeName ? React.createElement(\"div\", {\n      className: \"cm-flex cm-jc-sb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"half\",\n      className: \"cm-mt-080\",\n      onClick: () => this.update(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"\\u66F4\\u65B0\"), React.createElement(Button, {\n      type: \"half\",\n      className: \"cm-mt-080\",\n      onClick: () => this.delete(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"\\u5220\\u9664\")) : React.createElement(Button, {\n      type: \"fill\",\n      className: \"cm-mt-080\",\n      onClick: () => this.save(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, \"\\u4FDD\\u5B58\")), this.state.isShowAddress ? React.createElement(Address, {\n      closeModel: () => this.closeAddressModel(),\n      getAddress: address => this.getAddress(address),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }) : null);\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\caoxue\\Desktop\\secondary\\src\\pages\\personal\\addAddress.js"],"names":["React","Title","List","Input","Button","Address","getData","goNext","checkParam","Switch","Item","AddAddress","Component","constructor","props","state","id","consigneeName","consigneeMobile","province","city","district","street","addressDetail","isDefaultAddress","isShowAddress","item","history","location","change","setState","delete","arr","value","msg","method","url","data","successCB","res","update","save","from","showAddressModel","closeAddressModel","getAddress","address","render","val","textAlign"],"mappings":"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","sourcesContent":["/**\r\n * Created by Lenovo on 2019/8/10.\r\n */\r\nimport React from 'react';\r\nimport {Title, List, Input,Button,Address} from '../../share';\r\nimport {getData, goNext, checkParam} from '../../utils';\r\nimport {Switch} from 'antd-mobile';\r\nconst Item = List.Item;\r\nexport default class AddAddress extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            id:\"\",//地址编号\r\n            consigneeName: '',//收货人\r\n            consigneeMobile: '',//收货人联系方式\r\n            province:\"\",//省份\r\n            city:\"\",//城市\r\n            district:\"\",//区县\r\n            street:\"\",//街道\r\n            addressDetail:'',//详细地址\r\n            isDefaultAddress:false,//是否为默认地址\r\n            isShowAddress:false//是否显示地址组件\r\n        };\r\n        //作为编辑地址时其他页面携带过来的参数信息\r\n        this.item = this.props.history.location.state ||{};\r\n        //如果有参数信息携带过来，重新赋值地址信息\r\n        if(this.item.consigneeName){\r\n            this.state.id = this.item.id;\r\n            this.state.consigneeName = this.item.consigneeName;\r\n            this.state.consigneeMobile = this.item.consigneeMobile;\r\n            this.state.province = this.item.province;\r\n            this.state.city = this.item.city;\r\n            this.state.district = this.item.district;\r\n            this.state.street = this.item.street;\r\n            this.state.addressDetail = this.item.addressDetail;\r\n            //地址为1时转义为布尔值true，即默认地址；地址为2时为false。\r\n            this.state.isDefaultAddress = this.item.isDefaultAddress === 1?true:false;\r\n        }\r\n    }\r\n    //改变value值时重置state\r\n    change(state) {\r\n        this.setState(state)\r\n    }\r\n    //调取删除地址接口\r\n    delete(){\r\n        var arr = [\r\n            {value: this.state.id, msg: \"没有收货地址编号\"}\r\n        ];\r\n        checkParam(arr, () => {\r\n            getData({\r\n                method: 'post',\r\n                url: 'delAddress',\r\n                data: {\r\n                    id:this.state.id,\r\n                },\r\n                successCB: (res) => {\r\n                    goNext(this, 'addressManage')\r\n                }\r\n            })\r\n        })\r\n    }\r\n    //调取更新地址接口\r\n    update(){\r\n        var arr = [\r\n            {value: this.state.id, msg: \"没有收货地址编号\"},\r\n            {value: this.state.consigneeName, msg: \"请输入收货人\"},\r\n            {value: this.state.consigneeMobile, msg: \"请输入收货人联系方式\"},\r\n            {value: this.state.province, msg: \"请输入省份\"},\r\n            {value: this.state.city, msg: \"请输入城市\"},\r\n            {value: this.state.district, msg: \"请输入县区\"},\r\n            {value: this.state.addressDetail, msg: \"请输入详细地址\"},\r\n        ];\r\n        checkParam(arr, () => {\r\n            getData({\r\n                method: 'post',\r\n                url: 'updateAddress',\r\n                data: {\r\n                    id:this.state.id,\r\n                    consigneeName: this.state.consigneeName,\r\n                    consigneeMobile: this.state.consigneeMobile,\r\n                    province: this.state.province,\r\n                    city: this.state.city,\r\n                    district: this.state.district,\r\n                    street: this.state.street,\r\n                    addressDetail: this.state.addressDetail,\r\n                    isDefaultAddress:this.state.isDefaultAddress?1:2,\r\n                },\r\n                successCB: (res) => {\r\n                    goNext(this, 'addressManage')\r\n                }\r\n            })\r\n        })\r\n    }\r\n    //调取保存地址接口\r\n    save() {\r\n        var arr = [\r\n            {value: this.state.consigneeName, msg: \"请输入收货人\"},\r\n            {value: this.state.consigneeMobile, msg: \"请输入收货人联系方式\"},\r\n            {value: this.state.province, msg: \"请输入省份\"},\r\n            {value: this.state.city, msg: \"请输入城市\"},\r\n            {value: this.state.district, msg: \"请输入县区\"},\r\n            {value: this.state.addressDetail, msg: \"请输入详细地址\"},\r\n        ];\r\n        checkParam(arr, () => {\r\n            var data = {\r\n                consigneeName: this.state.consigneeName,\r\n                consigneeMobile: this.state.consigneeMobile,\r\n                province: this.state.province,\r\n                city: this.state.city,\r\n                district: this.state.district,\r\n                street: this.state.street,\r\n                addressDetail: this.state.addressDetail,\r\n                isDefaultAddress:this.state.isDefaultAddress?1:2,\r\n            }\r\n            getData({\r\n                method: 'post',\r\n                url: 'saveAddress',\r\n                data: data,\r\n                successCB: (res) => {\r\n                    if(this.item.from == \"order\"){\r\n                        goNext(this, 'order',data)\r\n                    }else {\r\n                        goNext(this, 'addressManage')\r\n                    }\r\n\r\n                }\r\n            })\r\n        })\r\n    }\r\n    //显示地址选择弹框\r\n    showAddressModel(){\r\n        this.setState({\r\n            isShowAddress:true\r\n        })\r\n    }\r\n    //关闭地址选择弹框\r\n    closeAddressModel(){\r\n        this.setState({\r\n            isShowAddress:false\r\n        });\r\n    }\r\n    //关闭地址选择弹框，获取地址信息\r\n    getAddress(address){\r\n        this.setState({\r\n            isShowAddress:false,\r\n            province:address.province,\r\n            city:address.city,\r\n            district:address.district,\r\n            street:address.street,\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Title that={this} title={this.item.consigneeName?\"编辑收货地址\":\"添加收货地址\"}/>\r\n                <div className=\"cm-mlr-02\">\r\n                    <List>\r\n                        <Input\r\n                            placeholder=\"收货人\"\r\n                            defaultValue={this.state.consigneeName}\r\n                            onChange={(val) => this.change({consigneeName: val})}\r\n                            style={{textAlign:'left'}}\r\n                        />\r\n                    </List>\r\n                    <List>\r\n                        <Input\r\n                            type=\"number\"\r\n                            maxLength={11}\r\n                            placeholder=\"手机号码\"\r\n                            defaultValue={this.state.consigneeMobile}\r\n                            onChange={(val) => this.change({consigneeMobile: val})}\r\n                            style={{textAlign:'left'}}\r\n                        />\r\n                    </List>\r\n                    <List onClick={()=>this.showAddressModel()}>\r\n                        <Item\r\n                            leftTitle={\r\n                                this.state.province? <div>\r\n                                       <div>{this.state.province}</div>\r\n                                       <div>{this.state.city}</div>\r\n                                       <div>{this.state.district}</div>\r\n                                       <div>{this.state.street}</div>\r\n                                       </div>\r\n                                : <div className=\"cm-c-999\">所在地区</div>\r\n                            }\r\n                        />\r\n                    </List>\r\n                    <List>\r\n                        <Input\r\n                            type=\"text\"\r\n                            placeholder=\"详细地址：如建中路88号8层808室\"\r\n                            defaultValue={this.state.addressDetail}\r\n                            onChange={(val) => this.change({addressDetail: val})}\r\n                            style={{textAlign:'left'}}\r\n                        />\r\n                    </List>\r\n                    <div className=\"cm-flex cm-ptb-02 cm-jc-sb\">\r\n                        <div>设为默认地址</div>\r\n                        <Switch\r\n                            checked={this.state.isDefaultAddress}\r\n                            onChange={(val) => {\r\n                                this.setState({\r\n                                    isDefaultAddress: val,\r\n                                });\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    {this.item.consigneeName?<div className=\"cm-flex cm-jc-sb\"><Button type=\"half\" className=\"cm-mt-080\" onClick={() => this.update()}>更新</Button>\r\n                            <Button type=\"half\"  className=\"cm-mt-080\" onClick={() => this.delete()}>删除</Button>\r\n                        </div>: <Button type=\"fill\"  className=\"cm-mt-080\" onClick={() => this.save()}>保存</Button>}\r\n\r\n                </div>\r\n                {this.state.isShowAddress?<Address\r\n                        closeModel={()=>this.closeAddressModel()}\r\n                        getAddress={(address)=>this.getAddress(address)}\r\n                    />:null}\r\n            </div>)\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}